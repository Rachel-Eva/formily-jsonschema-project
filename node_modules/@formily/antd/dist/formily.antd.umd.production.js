!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react-is")):"function"==typeof define&&define.amd?define("formily.antd",["exports","react-is"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Formily=e.Formily||{},e.Formily.Antd={}))}(this,(function(e){"use strict";!function(){const e={NODE_ENV:"production"};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e){var t={exports:{}};return e(t,t.exports),t.exports}"function"==typeof SuppressedError&&SuppressedError;var s=c((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&e.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var l in o)t.call(o,l)&&o[l]&&e.push(l);else e.push(o.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),u=function(e,t){return Array.isArray(e)?e.map((function(e){return moment(e,t)})):e?moment(e,t):e},d=function(e,t,n){var r=function(e,t,r){if(void 0===r&&(r=0),!e)return n;var o=t;return Formily.Shared.isArr(t)&&(o=t[r]),Formily.Shared.isFn(o)?o(e):Formily.Shared.isEmpty(o)?e:/^(?:[01]\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e)?moment(e,o).format(o):moment(e).format(o)};return Formily.Shared.isArr(e)?e.map((function(e,n){return r(e,t,n)})):e?r(e,t):e||n};var f,v=function(e,t){var n;if("ConfigContext"in antd.ConfigProvider)return(0,React.useContext(antd.ConfigProvider.ConfigContext).getPrefixCls)(e,null==t?void 0:t.prefixCls);var r=null!==(n=null==t?void 0:t.prefixCls)&&void 0!==n?n:"ant-";return"".concat(r).concat(null!=e?e:"")},m=t({},ReactDOM),p=m.version,h=m.render,y=m.unmountComponentAtNode;try{Number((p||"").split(".")[0])>=18&&m.createRoot&&(f=m.createRoot)}catch(e){}function g(e){var t=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"==typeof t&&(t.usingClientEntryPoint=e)}var b="__antd_mobile_root__";function R(e,t){f?function(e,t){g(!0);var n=t[b]||f(t);g(!1),n.render(e),t[b]=n}(e,t):function(e,t){h(e,t)}(e,t)}function w(e){return f?function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,Promise.resolve().then((function(){var t;null===(t=e[b])||void 0===t||t.unmount(),delete e[b]}))]}))}))}(e):function(e){return y(e)}(e)}var x=Formily.Reactive.observable(new Map),E=function(e){return function(t){var n,r=null!==(n=t.id)&&void 0!==n?n:e;return r&&!x.has(r)&&x.set(r,null),React.createElement(React.Fragment,null,t.children,React.createElement(Formily.React.Observer,null,(function(){if(!r)return null;var e=x.get(r);return e?ReactDOM.createPortal(e,document.body):null})))}};function S(e,t){return{render:function(n){x.has(t)?x.set(t,null==n?void 0:n()):e&&R(React.createElement(React.Fragment,null,null==n?void 0:n()),e)},unmount:function(){var n;x.has(t)&&x.set(t,null),e&&w(e)&&e.parentNode&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}}}var F=function(e,t){return void 0===e&&(e="Loading..."),r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:n=null,r=setTimeout((function(){n=antd.message.loading(e)}),100),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,t()];case 2:return[2,o.sent()];case 3:return null==n||n(),clearTimeout(r),[7];case 4:return[2]}}))}))},C=function(e){void 0===e&&(e={});var t={};for(var n in e)n.indexOf("data-")>-1&&(t[n]=e[n]);return t};const O="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function k(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function P(e){return"nodeType"in e}function T(e){var t,n;return e?k(e)?e:P(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function N(e){const{Document:t}=T(e);return e instanceof t}function A(e){return!k(e)&&e instanceof T(e).HTMLElement}function M(e){return e?k(e)?e.document:P(e)?N(e)?e:A(e)?e.ownerDocument:document:document:document}const D=O?React.useLayoutEffect:React.useEffect;function _(e){const t=React.useRef(e);return D((()=>{t.current=e})),React.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function I(e,t){void 0===t&&(t=[e]);const n=React.useRef(e);return D((()=>{n.current!==e&&(n.current=e)}),t),n}function B(e,t){const n=React.useRef();return React.useMemo((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function z(e){const t=_(e),n=React.useRef(null),r=React.useCallback((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function j(e){const t=React.useRef();return React.useEffect((()=>{t.current=e}),[e]),t.current}let L={};function W(e,t){return React.useMemo((()=>{if(t)return t;const n=null==L[e]?0:L[e]+1;return L[e]=n,e+"-"+n}),[e,t])}function V(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t}),{...t})}}const X=V(1),Y=V(-1);function H(e){if(!e)return!1;const{KeyboardEvent:t}=T(e.target);return t&&e instanceof t}function U(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=T(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const K=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[K.Translate.toString(e),K.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),q="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function G(e){return e.matches(q)?e:e.querySelector(q)}const J={display:"none"};function Q(e){let{id:t,value:n}=e;return React.createElement("div",{id:t,style:J},n)}const $={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function Z(e){let{id:t,announcement:n}=e;return React.createElement("div",{id:t,style:$,role:"status","aria-live":"assertive","aria-atomic":!0},n)}const ee=React.createContext(null);const te={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ne={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function re(e){let{announcements:t=ne,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=te}=e;const{announce:i,announcement:a}=function(){const[e,t]=React.useState("");return{announce:React.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=W("DndLiveRegion"),[c,s]=React.useState(!1);if(React.useEffect((()=>{s(!0)}),[]),function(e){const t=React.useContext(ee);React.useEffect((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}(React.useMemo((()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}})),[i,t])),!c)return null;const u=React.createElement(React.Fragment,null,React.createElement(Q,{id:r,value:o.draggable}),React.createElement(Z,{id:l,announcement:a}));return n?ReactDOM.createPortal(u,n):u}var oe;function ie(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(oe||(oe={}));const ae=Object.freeze({x:0,y:0});function le(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ce(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*l;return Number((o/(n+r-o)).toFixed(4))}return 0}const se=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=ce(i,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(le)};function ue(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ae}function de(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const fe=de(1);const ve={ignoreTransform:!1};function me(e,t){void 0===t&&(t=ve);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=T(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:l}=r,c=e.left-a-(1-o)*parseFloat(n),s=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:s,right:c+u,bottom:s+d,left:c}}(n,t,r))}const{top:r,left:o,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:o,width:i,height:a,bottom:l,right:c}}function pe(e){return me(e,{ignoreTransform:!0})}function he(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(N(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!A(o)||function(e){return e instanceof T(e).SVGElement}(o))return n;if(n.includes(o))return n;const i=T(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=T(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,i)&&n.push(o),function(e,t){return void 0===t&&(t=T(e).getComputedStyle(e)),"fixed"===t.position}(o,i)?n:r(o.parentNode)}(e):n}function ye(e){const[t]=he(e,1);return null!=t?t:null}function ge(e){return O&&e?k(e)?e:P(e)?N(e)||e===M(e).scrollingElement?window:A(e)?e:null:null:null}function be(e){return k(e)?e.scrollX:e.scrollLeft}function Re(e){return k(e)?e.scrollY:e.scrollTop}function we(e){return{x:be(e),y:Re(e)}}var xe;function Ee(e){return!(!O||!e)&&e===document.scrollingElement}function Se(e){const t={x:0,y:0},n=Ee(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(xe||(xe={}));const Fe={x:.2,y:.2};function Ce(e,t,n,r,o){let{top:i,left:a,right:l,bottom:c}=n;void 0===r&&(r=10),void 0===o&&(o=Fe);const{isTop:s,isBottom:u,isLeft:d,isRight:f}=Se(e),v={x:0,y:0},m={x:0,y:0},p=t.height*o.y,h=t.width*o.x;return!s&&i<=t.top+p?(v.y=xe.Backward,m.y=r*Math.abs((t.top+p-i)/p)):!u&&c>=t.bottom-p&&(v.y=xe.Forward,m.y=r*Math.abs((t.bottom-p-c)/p)),!f&&l>=t.right-h?(v.x=xe.Forward,m.x=r*Math.abs((t.right-h-l)/h)):!d&&a<=t.left+h&&(v.x=xe.Backward,m.x=r*Math.abs((t.left+h-a)/h)),{direction:v,speed:m}}function Oe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function ke(e){return e.reduce(((e,t)=>X(e,we(t))),ae)}const Pe=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+be(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Re(t)),0)}]];class Te{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=he(t),r=ke(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of Pe)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=o(n),a=r[e]-t;return this.rect[i]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ne{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Ae(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Me,De;function _e(e){e.preventDefault()}function Ie(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Me||(Me={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(De||(De={}));const Be={start:[De.Space,De.Enter],cancel:[De.Esc],end:[De.Space,De.Enter]},ze=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case De.Right:return{...n,x:n.x+25};case De.Left:return{...n,x:n.x-25};case De.Down:return{...n,y:n.y+25};case De.Up:return{...n,y:n.y-25}}};class je{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Ne(M(t)),this.windowListeners=new Ne(T(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Me.Resize,this.handleCancel),this.windowListeners.add(Me.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Me.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=me),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);ye(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(ae)}handleKeyDown(e){if(H(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=Be,coordinateGetter:i=ze,scrollBehavior:a="smooth"}=r,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:c}=n.current,s=c?{x:c.left,y:c.top}:ae;this.referenceCoordinates||(this.referenceCoordinates=s);const u=i(e,{active:t,context:n.current,currentCoordinates:s});if(u){const t=Y(u,s),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:l,isLeft:c,isBottom:s,maxScroll:d,minScroll:f}=Se(n),v=Oe(n),m={x:Math.min(o===De.Right?v.right-v.width/2:v.right,Math.max(o===De.Right?v.left:v.left+v.width/2,u.x)),y:Math.min(o===De.Down?v.bottom-v.height/2:v.bottom,Math.max(o===De.Down?v.top:v.top+v.height/2,u.y))},p=o===De.Right&&!l||o===De.Left&&!c,h=o===De.Down&&!s||o===De.Up&&!i;if(p&&m.x!==u.x){const e=n.scrollLeft+t.x,i=o===De.Right&&e<=d.x||o===De.Left&&e>=f.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:a});r.x=i?n.scrollLeft-e:o===De.Right?n.scrollLeft-d.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(h&&m.y!==u.y){const e=n.scrollTop+t.y,i=o===De.Down&&e<=d.y||o===De.Up&&e>=f.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:a});r.y=i?n.scrollTop-e:o===De.Down?n.scrollTop-d.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,X(Y(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Le(e){return Boolean(e&&"distance"in e)}function We(e){return Boolean(e&&"delay"in e)}je.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Be,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];class Ve{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=T(e);return e instanceof t?e:M(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:i}=o;this.props=e,this.events=t,this.document=M(i),this.documentListeners=new Ne(this.document),this.listeners=new Ne(n),this.windowListeners=new Ne(T(i)),this.initialCoordinates=null!=(r=U(o))?r:ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Me.Resize,this.handleCancel),this.windowListeners.add(Me.DragStart,_e),this.windowListeners.add(Me.VisibilityChange,this.handleCancel),this.windowListeners.add(Me.ContextMenu,_e),this.documentListeners.add(Me.Keydown,this.handleKeydown),t){if(Le(t))return;if(We(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Me.Click,Ie,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Me.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const l=null!=(t=U(e))?t:ae,c=Y(r,l);if(!n&&a){if(We(a))return Ae(c,a.tolerance)?this.handleCancel():void 0;if(Le(a))return null!=a.tolerance&&Ae(c,a.tolerance)?this.handleCancel():Ae(c,a.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===De.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Xe={move:{name:"pointermove"},end:{name:"pointerup"}};class Ye extends Ve{constructor(e){const{event:t}=e,n=M(t.target);super(e,Xe,n)}}Ye.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const He={move:{name:"mousemove"},end:{name:"mouseup"}};var Ue;!function(e){e[e.RightClick=2]="RightClick"}(Ue||(Ue={}));(class extends Ve{constructor(e){super(e,He,M(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Ue.RightClick&&(null==r||r({event:n}),!0)}}];const Ke={move:{name:"touchmove"},end:{name:"touchend"}};var qe,Ge;function Je(e){let{acceleration:t,activator:n=qe.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:a=5,order:l=Ge.TreeOrder,pointerCoordinates:c,scrollableAncestors:s,scrollableAncestorRects:u,delta:d,threshold:f}=e;const v=function(e){let{delta:t,disabled:n}=e;const r=j(t);return B((e=>{if(n||!r||!e)return Qe;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[xe.Backward]:e.x[xe.Backward]||-1===o.x,[xe.Forward]:e.x[xe.Forward]||1===o.x},y:{[xe.Backward]:e.y[xe.Backward]||-1===o.y,[xe.Forward]:e.y[xe.Forward]||1===o.y}}}),[n,t,r])}({delta:d,disabled:!i}),[m,p]=function(){const e=React.useRef(null);return[React.useCallback(((t,n)=>{e.current=setInterval(t,n)}),[]),React.useCallback((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),h=React.useRef({x:0,y:0}),y=React.useRef({x:0,y:0}),g=React.useMemo((()=>{switch(n){case qe.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case qe.DraggableRect:return o}}),[n,o,c]),b=React.useRef(null),R=React.useCallback((()=>{const e=b.current;if(!e)return;const t=h.current.x*y.current.x,n=h.current.y*y.current.y;e.scrollBy(t,n)}),[]),w=React.useMemo((()=>l===Ge.TreeOrder?[...s].reverse():s),[l,s]);React.useEffect((()=>{if(i&&s.length&&g){for(const e of w){if(!1===(null==r?void 0:r(e)))continue;const n=s.indexOf(e),o=u[n];if(!o)continue;const{direction:i,speed:l}=Ce(e,o,g,t,f);for(const e of["x","y"])v[e][i[e]]||(l[e]=0,i[e]=0);if(l.x>0||l.y>0)return p(),b.current=e,m(R,a),h.current=l,void(y.current=i)}h.current={x:0,y:0},y.current={x:0,y:0},p()}else p()}),[t,R,r,p,i,a,JSON.stringify(g),JSON.stringify(v),m,s,w,u,JSON.stringify(f)])}(class extends Ve{constructor(e){super(e,Ke)}static setup(){return window.addEventListener(Ke.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ke.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(qe||(qe={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Ge||(Ge={}));const Qe={x:{[xe.Backward]:!1,[xe.Forward]:!1},y:{[xe.Backward]:!1,[xe.Forward]:!1}};var $e,Ze;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}($e||($e={})),function(e){e.Optimized="optimized"}(Ze||(Ze={}));const et=new Map;function tt(e,t){return B((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function nt(e){let{callback:t,disabled:n}=e;const r=_(t),o=React.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return React.useEffect((()=>()=>null==o?void 0:o.disconnect()),[o]),o}function rt(e){return new Te(me(e),e)}function ot(e,t,n){void 0===t&&(t=rt);const[r,o]=React.useReducer((function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const i=t(e);if(JSON.stringify(r)===JSON.stringify(i))return r;return i}),null),i=function(e){let{callback:t,disabled:n}=e;const r=_(t),o=React.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return React.useEffect((()=>()=>null==o?void 0:o.disconnect()),[o]),o}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),a=nt({callback:o});return D((()=>{o(),e?(null==a||a.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==i||i.disconnect())}),[e]),r}const it=[];function at(e,t){void 0===t&&(t=[]);const n=React.useRef(null);return React.useEffect((()=>{n.current=null}),t),React.useEffect((()=>{const t=e!==ae;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?Y(e,n.current):ae}function lt(e){return React.useMemo((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const ct=[];function st(e){let{measure:t}=e;const[n,r]=React.useState(null),o=React.useCallback((e=>{for(const{target:n}of e)if(A(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t]),i=nt({callback:o}),a=React.useCallback((e=>{const n=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return A(t)?t:e}(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)}),[t,i]),[l,c]=z(a);return React.useMemo((()=>({nodeRef:l,rect:n,setRef:c})),[n,l,c])}const ut=[{sensor:Ye,options:{}},{sensor:je,options:{}}],dt={current:{}},ft={draggable:{measure:pe},droppable:{measure:pe,strategy:$e.WhileDragging,frequency:Ze.Optimized},dragOverlay:{measure:me}};class vt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const mt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ie},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ft,measureDroppableContainers:ie,windowRect:null,measuringScheduled:!1},pt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ie,draggableNodes:new Map,over:null,measureDroppableContainers:ie},ht=React.createContext(pt),yt=React.createContext(mt);function gt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vt}}}function bt(e,t){switch(t.type){case oe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case oe.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case oe.DragEnd:case oe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case oe.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new vt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case oe.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new vt(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case oe.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new vt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Rt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=React.useContext(ht),i=j(r),a=j(null==n?void 0:n.id);return React.useEffect((()=>{if(!t&&!r&&i&&null!=a){if(!H(i))return;if(document.activeElement===i.target)return;const e=o.get(a);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=G(e);if(t){t.focus();break}}}))}}),[r,t,o,a,i]),null}const wt=React.createContext({...ae,scaleX:1,scaleY:1});var xt;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(xt||(xt={}));const Et=React.memo((function(e){var t,n,r,o;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:s=ut,collisionDetection:u=se,measuring:d,modifiers:f,...v}=e;const m=React.useReducer(bt,void 0,gt),[p,h]=m,[y,g]=function(){const[e]=React.useState((()=>new Set)),t=React.useCallback((t=>(e.add(t),()=>e.delete(t))),[e]);return[React.useCallback((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[b,R]=React.useState(xt.Uninitialized),w=b===xt.Initialized,{draggable:{active:x,nodes:E,translate:S},droppable:{containers:F}}=p,C=x?E.get(x):null,k=React.useRef({initial:null,translated:null}),P=React.useMemo((()=>{var e;return null!=x?{id:x,data:null!=(e=null==C?void 0:C.data)?e:dt,rect:k}:null}),[x,C]),N=React.useRef(null),[A,M]=React.useState(null),[_,z]=React.useState(null),j=I(v,Object.values(v)),L=W("DndDescribedBy",i),V=React.useMemo((()=>F.getEnabled()),[F]),Y=(H=d,React.useMemo((()=>({draggable:{...ft.draggable,...null==H?void 0:H.draggable},droppable:{...ft.droppable,...null==H?void 0:H.droppable},dragOverlay:{...ft.dragOverlay,...null==H?void 0:H.dragOverlay}})),[null==H?void 0:H.draggable,null==H?void 0:H.droppable,null==H?void 0:H.dragOverlay]));var H;const{droppableRects:K,measureDroppableContainers:q,measuringScheduled:G}=function(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,a]=React.useState(null),{frequency:l,measure:c,strategy:s}=o,u=React.useRef(e),d=function(){switch(s){case $e.Always:return!1;case $e.BeforeDragging:return n;default:return!n}}(),f=I(d),v=React.useCallback((function(e){void 0===e&&(e=[]),f.current||a((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[f]),m=React.useRef(null),p=B((t=>{if(d&&!n)return et;if(!t||t===et||u.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Te(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,i,n,d,c]);return React.useEffect((()=>{u.current=e}),[e]),React.useEffect((()=>{d||v()}),[n,d]),React.useEffect((()=>{i&&i.length>0&&a(null)}),[JSON.stringify(i)]),React.useEffect((()=>{d||"number"!=typeof l||null!==m.current||(m.current=setTimeout((()=>{v(),m.current=null}),l))}),[l,d,v,...r]),{droppableRects:p,measureDroppableContainers:v,measuringScheduled:null!=i}}(V,{dragging:w,dependencies:[S.x,S.y],config:Y.droppable}),J=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return B((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(E,x),Q=React.useMemo((()=>_?U(_):null),[_]),$=function(){const e=!1===(null==A?void 0:A.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,n=w&&!e&&!t;if("object"==typeof l)return{...l,enabled:n};return{enabled:n}}(),Z=function(e,t){return tt(e,t)}(J,Y.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=React.useRef(!1),{x:a,y:l}="boolean"==typeof o?{x:o,y:o}:o;D((()=>{if(!a&&!l||!t)return void(i.current=!1);if(i.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const o=ue(n(e),r);if(a||(o.x=0),l||(o.y=0),i.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const t=ye(e);t&&t.scrollBy({top:o.y,left:o.x})}}),[t,a,l,r,n])}({activeNode:x?E.get(x):null,config:$.layoutShiftCompensation,initialRect:Z,measure:Y.draggable.measure});const te=ot(J,Y.draggable.measure,Z),ne=ot(J?J.parentElement:null),ie=React.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),le=F.getNodeFor(null==(t=ie.current.over)?void 0:t.id),ce=st({measure:Y.dragOverlay.measure}),de=null!=(n=ce.nodeRef.current)?n:J,ve=w?null!=(r=ce.rect)?r:te:null,pe=Boolean(ce.nodeRef.current&&ce.rect),be=ue(Re=pe?null:te,tt(Re));var Re;const xe=lt(de?T(de):null),Se=function(e){const t=React.useRef(e),n=B((n=>e?n&&n!==it&&e&&t.current&&e.parentNode===t.current.parentNode?n:he(e):it),[e]);return React.useEffect((()=>{t.current=e}),[e]),n}(w?null!=le?le:J:null),Fe=function(e,t){void 0===t&&(t=me);const[n]=e,r=lt(n?T(n):null),[o,i]=React.useReducer((function(){return e.length?e.map((e=>Ee(e)?r:new Te(t(e),e))):ct}),ct),a=nt({callback:i});return e.length>0&&o===ct&&i(),D((()=>{e.length?e.forEach((e=>null==a?void 0:a.observe(e))):(null==a||a.disconnect(),i())}),[e]),o}(Se),Ce=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}(f,{transform:{x:S.x-be.x,y:S.y-be.y,scaleX:1,scaleY:1},activatorEvent:_,active:P,activeNodeRect:te,containerNodeRect:ne,draggingNodeRect:ve,over:ie.current.over,overlayNodeRect:ce.rect,scrollableAncestors:Se,scrollableAncestorRects:Fe,windowRect:xe}),Oe=Q?X(Q,S):null,Pe=function(e){const[t,n]=React.useState(null),r=React.useRef(e),o=React.useCallback((e=>{const t=ge(e.target);t&&n((e=>e?(e.set(t,we(t)),new Map(e)):null))}),[]);return React.useEffect((()=>{const t=r.current;if(e!==t){i(t);const a=e.map((e=>{const t=ge(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,we(t)]):null})).filter((e=>null!=e));n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach((e=>{const t=ge(e);null==t||t.removeEventListener("scroll",o)}))}}),[o,e]),React.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>X(e,t)),ae):ke(e):ae),[e,t])}(Se),Ne=at(Pe),Ae=at(Pe,[te]),Me=X(Ce,Ne),De=ve?fe(ve,Ce):null,_e=P&&De?u({active:P,collisionRect:De,droppableRects:K,droppableContainers:V,pointerCoordinates:Oe}):null,Ie=function(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}(_e,"id"),[Be,ze]=React.useState(null),je=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(pe?Ce:X(Ce,Ae),null!=(o=null==Be?void 0:Be.rect)?o:null,te),Le=React.useCallback(((e,t)=>{let{sensor:n,options:r}=t;if(null==N.current)return;const o=E.get(N.current);if(!o)return;const i=e.nativeEvent,a=new n({active:N.current,activeNode:o,event:i,options:r,context:ie,onStart(e){const t=N.current;if(null==t)return;const n=E.get(t);if(!n)return;const{onDragStart:r}=j.current,o={active:{id:t,data:n.data,rect:k}};ReactDOM.unstable_batchedUpdates((()=>{null==r||r(o),R(xt.Initializing),h({type:oe.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:o})}))},onMove(e){h({type:oe.DragMove,coordinates:e})},onEnd:l(oe.DragEnd),onCancel:l(oe.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=ie.current;let a=null;if(t&&o){const{cancelDrop:l}=j.current;if(a={activatorEvent:i,active:t,collisions:n,delta:o,over:r},e===oe.DragEnd&&"function"==typeof l){await Promise.resolve(l(a))&&(e=oe.DragCancel)}}N.current=null,ReactDOM.unstable_batchedUpdates((()=>{h({type:e}),R(xt.Uninitialized),ze(null),M(null),z(null);const t=e===oe.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=j.current[t];null==e||e(a),y({type:t,event:a})}}))}}ReactDOM.unstable_batchedUpdates((()=>{M(a),z(e.nativeEvent)}))}),[E]),We=React.useCallback(((e,t)=>(n,r)=>{const o=n.nativeEvent,i=E.get(r);if(null!==N.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},N.current=r,Le(n,t))}),[E,Le]),Ve=function(e,t){return React.useMemo((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(s,We);!function(e){React.useEffect((()=>{if(!O)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(s),D((()=>{te&&b===xt.Initializing&&R(xt.Initialized)}),[te,b]),React.useEffect((()=>{const{onDragMove:e}=j.current,{active:t,activatorEvent:n,collisions:r,over:o}=ie.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:Me.x,y:Me.y},over:o};ReactDOM.unstable_batchedUpdates((()=>{null==e||e(i),y({type:"onDragMove",event:i})}))}),[Me.x,Me.y]),React.useEffect((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=ie.current;if(!e||null==N.current||!t||!o)return;const{onDragOver:i}=j.current,a=r.get(Ie),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:l};ReactDOM.unstable_batchedUpdates((()=>{ze(l),null==i||i(c),y({type:"onDragOver",event:c})}))}),[Ie]),D((()=>{ie.current={activatorEvent:_,active:P,activeNode:J,collisionRect:De,collisions:_e,droppableRects:K,draggableNodes:E,draggingNode:de,draggingNodeRect:ve,droppableContainers:F,over:Be,scrollableAncestors:Se,scrollAdjustedTranslate:Me},k.current={initial:ve,translated:De}}),[P,J,_e,De,E,de,ve,K,F,Be,Se,Me]),Je({...$,delta:S,draggingRect:De,pointerCoordinates:Oe,scrollableAncestors:Se,scrollableAncestorRects:Fe});const Xe=React.useMemo((()=>({active:P,activeNode:J,activeNodeRect:te,activatorEvent:_,collisions:_e,containerNodeRect:ne,dragOverlay:ce,draggableNodes:E,droppableContainers:F,droppableRects:K,over:Be,measureDroppableContainers:q,scrollableAncestors:Se,scrollableAncestorRects:Fe,measuringConfiguration:Y,measuringScheduled:G,windowRect:xe})),[P,J,te,_,_e,ne,ce,E,F,K,Be,q,Se,Fe,Y,G,xe]),Ye=React.useMemo((()=>({activatorEvent:_,activators:Ve,active:P,activeNodeRect:te,ariaDescribedById:{draggable:L},dispatch:h,draggableNodes:E,over:Be,measureDroppableContainers:q})),[_,Ve,P,te,h,L,E,Be,q]);return React.createElement(ee.Provider,{value:g},React.createElement(ht.Provider,{value:Ye},React.createElement(yt.Provider,{value:Xe},React.createElement(wt.Provider,{value:je},c)),React.createElement(Rt,{disabled:!1===(null==a?void 0:a.restoreFocus)})),React.createElement(re,{...a,hiddenTextDescribedById:L}))})),St=React.createContext(null),Ft="button";function Ct(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=W("Droppable"),{activators:a,activatorEvent:l,active:c,activeNodeRect:s,ariaDescribedById:u,draggableNodes:d,over:f}=React.useContext(ht),{role:v=Ft,roleDescription:m="draggable",tabIndex:p=0}=null!=o?o:{},h=(null==c?void 0:c.id)===t,y=React.useContext(h?wt:St),[g,b]=z(),[R,w]=z(),x=function(e,t){return React.useMemo((()=>e.reduce(((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e}),{})),[e,t])}(a,t),E=I(n);D((()=>(d.set(t,{id:t,key:i,node:g,activatorNode:R,data:E}),()=>{const e=d.get(t);e&&e.key===i&&d.delete(t)})),[d,t]);return{active:c,activatorEvent:l,activeNodeRect:s,attributes:React.useMemo((()=>({role:v,tabIndex:p,"aria-disabled":r,"aria-pressed":!(!h||v!==Ft)||void 0,"aria-roledescription":m,"aria-describedby":u.draggable})),[r,v,p,h,m,u.draggable]),isDragging:h,listeners:r?void 0:x,node:g,over:f,setNodeRef:b,setActivatorNodeRef:w,transform:y}}const Ot={timeout:25};function kt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Pt(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function Tt(e){return null!==e&&e>=0}const Nt=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=kt(t,r,n),a=t[o],l=i[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},At={scaleX:1,scaleY:1},Mt=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:a}=e;const l=null!=(t=i[n])?t:r;if(!l)return null;if(o===n){const e=i[a];return e?{x:0,y:n<a?e.top+e.height-(l.top+l.height):e.top-l.top,...At}:null}const c=function(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];if(!r)return 0;if(n<t)return o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0;return i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0}(i,o,n);return o>n&&o<=a?{x:0,y:-l.height-c,...At}:o<n&&o>=a?{x:0,y:l.height+c,...At}:{x:0,y:0,...At}};const Dt="Sortable",_t=React.createContext({activeIndex:-1,containerId:Dt,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Nt,disabled:{draggable:!1,droppable:!1}});function It(e){let{children:t,id:n,items:r,strategy:o=Nt,disabled:i=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:s,measureDroppableContainers:u}=React.useContext(yt),d=W(Dt,n),f=Boolean(null!==l.rect),v=React.useMemo((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),m=null!=a,p=a?v.indexOf(a.id):-1,h=s?v.indexOf(s.id):-1,y=React.useRef(v),g=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(v,y.current),b=-1!==h&&-1===p||g,R=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(i);D((()=>{g&&m&&u(v)}),[g,v,m,u]),React.useEffect((()=>{y.current=v}),[v]);const w=React.useMemo((()=>({activeIndex:p,containerId:d,disabled:R,disableTransforms:b,items:v,overIndex:h,useDragOverlay:f,sortedRects:Pt(v,c),strategy:o})),[p,d,R.draggable,R.droppable,b,v,h,c,f,o]);return React.createElement(_t.Provider,{value:w},t)}const Bt=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return kt(n,r,o).indexOf(t)},zt=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:s}=e;return!(!s||!r)&&((l===i||o!==a)&&(!!n||a!==o&&t===c))},jt={duration:200,easing:"ease"},Lt="transform",Wt=K.Transition.toString({property:Lt,duration:0,easing:"linear"}),Vt={roleDescription:"sortable"};function Xt(e){let{animateLayoutChanges:t=zt,attributes:n,disabled:r,data:o,getNewIndex:i=Bt,id:a,strategy:l,resizeObserverConfig:c,transition:s=jt}=e;const{items:u,containerId:d,activeIndex:f,disabled:v,disableTransforms:m,sortedRects:p,overIndex:h,useDragOverlay:y,strategy:g}=React.useContext(_t),b=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,v),R=u.indexOf(a),w=React.useMemo((()=>({sortable:{containerId:d,index:R,items:u},...o})),[d,o,R,u]),x=React.useMemo((()=>u.slice(u.indexOf(a))),[u,a]),{rect:E,node:S,isOver:F,setNodeRef:C}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=W("Droppable"),{active:a,dispatch:l,over:c,measureDroppableContainers:s}=React.useContext(ht),u=React.useRef({disabled:n}),d=React.useRef(!1),f=React.useRef(null),v=React.useRef(null),{disabled:m,updateMeasurementsFor:p,timeout:h}={...Ot,...o},y=I(null!=p?p:r),g=nt({callback:React.useCallback((()=>{d.current?(null!=v.current&&clearTimeout(v.current),v.current=setTimeout((()=>{s(Array.isArray(y.current)?y.current:[y.current]),v.current=null}),h)):d.current=!0}),[h]),disabled:m||!a}),b=React.useCallback(((e,t)=>{g&&(t&&(g.unobserve(t),d.current=!1),e&&g.observe(e))}),[g]),[R,w]=z(b),x=I(t);return React.useEffect((()=>{g&&R.current&&(g.disconnect(),d.current=!1,g.observe(R.current))}),[R,g]),D((()=>(l({type:oe.RegisterDroppable,element:{id:r,key:i,disabled:n,node:R,rect:f,data:x}}),()=>l({type:oe.UnregisterDroppable,key:i,id:r}))),[r]),React.useEffect((()=>{n!==u.current.disabled&&(l({type:oe.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)}),[r,i,n,l]),{active:a,rect:f,isOver:(null==c?void 0:c.id)===r,node:R,over:c,setNodeRef:w}}({id:a,data:w,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...c}}),{active:O,activatorEvent:k,activeNodeRect:P,attributes:T,setNodeRef:N,listeners:A,isDragging:M,over:_,setActivatorNodeRef:B,transform:j}=Ct({id:a,data:w,attributes:{...Vt,...n},disabled:b.draggable}),L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return React.useMemo((()=>e=>{t.forEach((t=>t(e)))}),t)}(C,N),V=Boolean(O),X=V&&!m&&Tt(f)&&Tt(h),Y=!y&&M,U=Y&&X?j:null,q=X?null!=U?U:(null!=l?l:g)({rects:p,activeNodeRect:P,activeIndex:f,overIndex:h,index:R}):null,G=Tt(f)&&Tt(h)?i({id:a,items:u,activeIndex:f,overIndex:h}):R,J=null==O?void 0:O.id,Q=React.useRef({activeId:J,items:u,newIndex:G,containerId:d}),$=u!==Q.current.items,Z=t({active:O,containerId:d,isDragging:M,isSorting:V,id:a,index:R,items:u,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:s,wasDragging:null!=Q.current.activeId}),ee=function(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,a]=React.useState(null),l=React.useRef(n);return D((()=>{if(!t&&n!==l.current&&r.current){const e=o.current;if(e){const t=me(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&a(n)}}n!==l.current&&(l.current=n)}),[t,n,r,o]),React.useEffect((()=>{i&&a(null)}),[i]),i}({disabled:!Z,index:R,node:S,rect:E});return React.useEffect((()=>{V&&Q.current.newIndex!==G&&(Q.current.newIndex=G),d!==Q.current.containerId&&(Q.current.containerId=d),u!==Q.current.items&&(Q.current.items=u)}),[V,G,d,u]),React.useEffect((()=>{if(J===Q.current.activeId)return;if(J&&!Q.current.activeId)return void(Q.current.activeId=J);const e=setTimeout((()=>{Q.current.activeId=J}),50);return()=>clearTimeout(e)}),[J]),{active:O,activeIndex:f,attributes:T,data:w,rect:E,index:R,newIndex:G,items:u,isOver:F,isSorting:V,isDragging:M,listeners:A,node:S,overIndex:h,over:_,setNodeRef:L,setActivatorNodeRef:B,setDroppableNodeRef:C,setDraggableNodeRef:N,transform:null!=ee?ee:q,transition:function(){if(ee||$&&Q.current.newIndex===R)return Wt;if(Y&&!H(k)||!s)return;if(V||Z)return K.Transition.toString({...s,property:Lt});return}()}}function Yt(e){return function(r){var o=r.list,i=r.start,a=void 0===i?0:i,l=r.accessibility,c=r.onSortStart,s=r.onSortEnd,u=n(r,["list","start","accessibility","onSortStart","onSortEnd"]);return React.createElement(Et,{accessibility:l,onDragStart:c,onDragEnd:function(e){var t=e.active,n=e.over,r=t.id-1,o=(null==n?void 0:n.id)-1;null==s||s({oldIndex:r,newIndex:o})}},React.createElement(It,{items:o.map((function(e,t){return t+a+1})),strategy:Mt},React.createElement(e,t({},u),u.children)))}}De.Down,De.Right,De.Up,De.Left;var Ht=React.createContext({});function Ut(e){return function(r){var o=r.index,i=void 0===o?0:o,a=r.lockAxis,l=n(r,["index","lockAxis"]),c=Xt({id:i+1}),s=c.setNodeRef,u=c.transform,d=c.transition,f=c.isDragging;if(u)switch(a){case"x":u.y=0;break;case"y":u.x=0}var v=React.useMemo((function(){var e={position:"relative",touchAction:"none",zIndex:1,transform:"translate3d(".concat((null==u?void 0:u.x)||0,"px, ").concat((null==u?void 0:u.y)||0,"px, 0)"),transition:"".concat(u?"all 200ms ease":"")},n={transition:d,opacity:"0.8",transform:"translate3d(".concat((null==u?void 0:u.x)||0,"px, ").concat((null==u?void 0:u.y)||0,"px, 0)")};return t(f?t(t({},e),n):t({},e),l.style)}),[f,u,d,l.style]);return React.createElement(Ht.Provider,{value:c},e(t(t({},l),{style:v,ref:s})))}}var Kt=React.createContext(null),qt=React.createContext(null),Gt=function(){return React.useContext(Kt)},Jt=function(e){var t=React.useContext(qt);return t?t.index:e},Qt=function(e){if("array"===(null==e?void 0:e.type))return[];if("object"===(null==e?void 0:e.type))return{};if("void"===(null==e?void 0:e.type))for(var t in e.properties){var n=Qt(e.properties[t]);if(Formily.Shared.isValid(n))return n}},$t=function(e){var t=Formily.React.useField(),n=Formily.React.useFieldSchema();return React.createElement(Kt.Provider,{value:{field:t,schema:n,props:e}},e.children)};$t.Item=function(e){var t=e.children,r=n(e,["children"]);return React.createElement(qt.Provider,{value:r},t)};var Zt,en=(Zt=function(e){var n=v("formily-array-base");return React.createElement(icons.MenuOutlined,t({},e,{className:s("".concat(n,"-sort-handle"),e.className),style:t({},e.style)}))},function(e){var n=React.useContext(Ht),r=n.attributes,o=n.listeners;return React.createElement(Zt,t({},e,r,o))});$t.SortHandle=function(e){var n,r=Gt();return r?"editable"!==(null===(n=r.field)||void 0===n?void 0:n.pattern)?null:React.createElement(en,t({},e)):null},$t.Index=function(e){var n=Jt(),r=v("formily-array-base");return React.createElement("span",t({},e,{className:"".concat(r,"-index")}),"#",n+1,".")},$t.Addition=function(e){var n,r,o=Formily.React.useField(),i=Gt(),a=v("formily-array-base");return i?"editable"!==(null===(n=i.field)||void 0===n?void 0:n.pattern)&&"disabled"!==(null===(r=i.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"dashed",block:!0},e,{disabled:null==o?void 0:o.disabled,className:s("".concat(a,"-addition"),e.className),onClick:function(t){var n,r,o,a,l,c,s,u,d,f,v;if(!((null===(n=i.props)||void 0===n?void 0:n.disabled)||e.onClick&&(e.onClick(t),t.defaultPrevented))){var m=function(e,t){return Formily.Shared.isValid(e)?Formily.Shared.clone(e):Array.isArray(null==t?void 0:t.items)?Qt(null==t?void 0:t.items[0]):Qt(null==t?void 0:t.items)}(e.defaultValue,i.schema);"unshift"===e.method?(null===(o=null===(r=i.field)||void 0===r?void 0:r.unshift)||void 0===o||o.call(r,m),null===(l=null===(a=i.props)||void 0===a?void 0:a.onAdd)||void 0===l||l.call(a,0)):(null===(s=null===(c=i.field)||void 0===c?void 0:c.push)||void 0===s||s.call(c,m),null===(d=null===(u=i.props)||void 0===u?void 0:u.onAdd)||void 0===d||d.call(u,(null===(v=null===(f=null==i?void 0:i.field)||void 0===f?void 0:f.value)||void 0===v?void 0:v.length)-1))}},icon:Formily.Shared.isUndef(e.icon)?React.createElement(icons.PlusOutlined,null):e.icon}),e.title||o.title):null},$t.Copy=React.forwardRef((function(e,n){var r,o=Formily.React.useField(),i=Gt(),a=Jt(e.index),l=v("formily-array-base");return i?"editable"!==(null===(r=i.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"text"},e,{disabled:null==o?void 0:o.disabled,className:s("".concat(l,"-copy"),(null==o?void 0:o.disabled)?"".concat(l,"-copy-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c,s,u;if(!((null==o?void 0:o.disabled)||(t.stopPropagation(),(null===(n=i.props)||void 0===n?void 0:n.disabled)||e.onClick&&(e.onClick(t),t.defaultPrevented)))){var d=Formily.Shared.clone(null===(r=null==i?void 0:i.field)||void 0===r?void 0:r.value[a]),f=a+1;null===(c=null===(l=i.field)||void 0===l?void 0:l.insert)||void 0===c||c.call(l,f,d),null===(u=null===(s=i.props)||void 0===s?void 0:s.onCopy)||void 0===u||u.call(s,f)}},icon:Formily.Shared.isUndef(e.icon)?React.createElement(icons.CopyOutlined,null):e.icon}),e.title||o.title):null})),$t.Remove=React.forwardRef((function(e,n){var r,o=Jt(e.index),i=Formily.React.useField(),a=Gt(),l=v("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"text"},e,{disabled:null==i?void 0:i.disabled,className:s("".concat(l,"-remove"),(null==i?void 0:i.disabled)?"".concat(l,"-remove-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c;(null==i?void 0:i.disabled)||(t.stopPropagation(),e.onClick&&(e.onClick(t),t.defaultPrevented)||(null===(r=null===(n=a.field)||void 0===n?void 0:n.remove)||void 0===r||r.call(n,o),null===(c=null===(l=a.props)||void 0===l?void 0:l.onRemove)||void 0===c||c.call(l,o)))},icon:Formily.Shared.isUndef(e.icon)?React.createElement(icons.DeleteOutlined,null):e.icon}),e.title||i.title):null})),$t.MoveDown=React.forwardRef((function(e,n){var r,o=Jt(e.index),i=Formily.React.useField(),a=Gt(),l=v("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"text"},e,{disabled:null==i?void 0:i.disabled,className:s("".concat(l,"-move-down"),(null==i?void 0:i.disabled)?"".concat(l,"-move-down-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l,c;(null==i?void 0:i.disabled)||(t.stopPropagation(),e.onClick&&(e.onClick(t),t.defaultPrevented)||(null===(r=null===(n=a.field)||void 0===n?void 0:n.moveDown)||void 0===r||r.call(n,o),null===(c=null===(l=a.props)||void 0===l?void 0:l.onMoveDown)||void 0===c||c.call(l,o)))},icon:Formily.Shared.isUndef(e.icon)?React.createElement(icons.DownOutlined,null):e.icon}),e.title||i.title):null})),$t.MoveUp=React.forwardRef((function(e,n){var r,o=Jt(e.index),i=Formily.React.useField(),a=Gt(),l=v("formily-array-base");return a?"editable"!==(null===(r=a.field)||void 0===r?void 0:r.pattern)?null:React.createElement(antd.Button,t({type:"text"},e,{disabled:null==i?void 0:i.disabled,className:s("".concat(l,"-move-up"),(null==i?void 0:i.disabled)?"".concat(l,"-move-up-disabled"):"",e.className),ref:n,onClick:function(t){var n,r,l;(null==i?void 0:i.disabled)||(t.stopPropagation(),e.onClick&&(e.onClick(t),t.defaultPrevented)||(null===(n=null==a?void 0:a.field)||void 0===n||n.moveUp(o),null===(l=null===(r=null==a?void 0:a.props)||void 0===r?void 0:r.onMoveUp)||void 0===l||l.call(r,o)))},icon:Formily.Shared.isUndef(e.icon)?React.createElement(icons.UpOutlined,null):e.icon}),e.title||i.title):null})),$t.useArray=Gt,$t.useIndex=Jt,$t.useRecord=function(e){var t=React.useContext(qt);return function(e,t){return"function"==typeof e?e(t):e}(t?t.record:e,null==t?void 0:t.index)},$t.mixin=function(e){return e.Index=$t.Index,e.SortHandle=$t.SortHandle,e.Addition=$t.Addition,e.Copy=$t.Copy,e.Remove=$t.Remove,e.MoveDown=$t.MoveDown,e.MoveUp=$t.MoveUp,e.useArray=$t.useArray,e.useIndex=$t.useIndex,e.useRecord=$t.useRecord,e};var tn=Ut((function(e){return React.createElement("tr",t({},e))})),nn=Yt((function(e){return React.createElement("tbody",t({},e))})),rn=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Column"))>-1},on=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1},an={request:null},ln=Formily.React.observer((function(e){var t,n=Formily.React.useField(),r=v("formily-array-table"),o=n.errors,i=null===(t=e.options)||void 0===t?void 0:t.map((function(t){var r=t.label,i=t.value,a=Number(i),l=o.some((function(t){var r=function(e){var t;return Number(null===(t=e.slice(e.indexOf(n.address.toString())+1).match(/(\d+)/))||void 0===t?void 0:t[1])}(t.address),o=(a-1)*e.pageSize,i=a*e.pageSize;return r>=o&&r<=i}));return{label:l?React.createElement(antd.Badge,{dot:!0},r):r,value:i}})),a=15*String(null==i?void 0:i.length).length;return React.createElement(antd.Select,{value:e.value,onChange:e.onChange,options:i,virtual:!0,style:{width:a<60?60:a},className:s("".concat(r,"-status-select"),{"has-error":null==o?void 0:o.length})})}),{scheduler:function(e){clearTimeout(an.request),an.request=setTimeout((function(){e()}),100)}}),cn=React.createContext({}),sn=function(e){var n,r,o=i(React.useState(1),2),a=o[0],l=o[1],c=v("formily-array-table"),s=null===(n=e.showPagination)||void 0===n||n,u=e.pageSize||10,d=e.size||"default",f=e.dataSource||[],m=(a-1)*u,p=m+u-1,h=(null==f?void 0:f.length)||0,y=Math.ceil(h/u),g=Array.from(new Array(y)).map((function(e,t){var n=t+1;return{label:n,value:n}})),b=function(e){l(e)};React.useEffect((function(){y>0&&y<a&&b(y)}),[y,a]);return React.createElement(React.Fragment,null,React.createElement(cn.Provider,{value:{totalPage:y,pageSize:u,changePage:b,showPagination:s}},null===(r=e.children)||void 0===r?void 0:r.call(e,s?null==f?void 0:f.slice(m,p+1):f,function(){if(!(y<=1)&&s)return React.createElement("div",{className:"".concat(c,"-pagination")},React.createElement(antd.Space,null,React.createElement(ln,{value:a,pageSize:u,onChange:b,options:g,notFoundContent:!1}),React.createElement(antd.Pagination,t({},e,{pageSize:u,current:a,total:f.length,size:d,showSizeChanger:!1,onChange:b}))))}(),{startIndex:m})))},un=function(e){var n=v("formily-array-table"),r=e["data-row-key"]||0;return React.createElement(tn,t({lockAxis:"y"},e,{index:r,className:s(e.className,"".concat(n,"-row-").concat(r+1))}))},dn=Formily.React.observer((function(e){var n=React.useRef(),r=Formily.React.useField(),o=v("formily-array-table"),i=Array.isArray(r.value)?r.value.slice():[],a=function(){var e=Formily.React.useField(),t=Formily.React.useFieldSchema(),n=function(t){var r,o,i;if(rn(t)||function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Operations"))>-1}(t)||on(t)){if(!(null===(r=t["x-component-props"])||void 0===r?void 0:r.dataIndex)&&!t.name)return[];var a=(null===(o=t["x-component-props"])||void 0===o?void 0:o.dataIndex)||t.name,l=e.query(e.address.concat(a)).take(),c=(null===(i=null==l?void 0:l.component)||void 0===i?void 0:i[1])||t["x-component-props"]||{};return[{name:a,display:(null==l?void 0:l.display)||t["x-display"]||"visible",field:l,schema:t,columnProps:c}]}if(t.properties)return t.reduceProperties((function(e,t){return e.concat(n(t))}),[])};if(!t)throw new Error("can not found schema object");return function(e){return e?(Formily.Shared.isArr(e)?e:[e]).reduce((function(e,t){var r=n(t);return r?e.concat(r):e}),[]):[]}(t.items)}(),l=function(e,n,r){return r.reduce((function(r,o,i){var a=o.name,l=o.columnProps,c=o.schema;return"visible"!==o.display?r:rn(c)?r.concat(t(t({},l),{key:i,dataIndex:a,render:function(t,r){var o=null==e?void 0:e.indexOf(r),i=React.createElement($t.Item,{index:o,record:function(){var e;return null===(e=null==n?void 0:n.value)||void 0===e?void 0:e[o]}},React.createElement(Formily.React.RecursionField,{schema:c,name:o,onlyRenderProperties:!0}));return i}})):r}),[])}(i,r,a),c=Formily.Shared.isBool(e.pagination)?{showPagination:e.pagination}:e.pagination,u=Formily.React.useFieldSchema().reduceProperties((function(e,t,n){return on(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null),d=e.onAdd,f=e.onCopy,m=e.onRemove,p=e.onMoveDown,h=e.onMoveUp,y=function(e){return i.indexOf(e)},g=React.useCallback((function(e,i){return function(a){return React.createElement(nn,t({},a,{start:i,list:e.slice(),accessibility:{container:n.current||void 0},onSortStart:function(e){!function(e){var t,r=null===(t=n.current)||void 0===t?void 0:t.querySelector(".".concat(o,"-row-").concat(e)),i=document.body.querySelector(".".concat(o,"-sort-helper"));if(i){var a=null==r?void 0:r.querySelectorAll("td");a&&requestAnimationFrame((function(){i.querySelectorAll("td").forEach((function(e,t){a[t]&&(e.style.width=getComputedStyle(a[t]).width)}))}))}}(e.active.id)},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;r.move(t,n)},className:s("".concat(o,"-sort-helper"),a.className)}))}}),[r]);return React.createElement(sn,t({},c,{dataSource:i}),(function(r,i,c){var s=c.startIndex;return React.createElement("div",{ref:n,className:o},React.createElement($t,{onAdd:d,onCopy:f,onRemove:m,onMoveUp:h,onMoveDown:p},React.createElement(antd.Table,t({size:"small",bordered:!0,rowKey:y},e,{onChange:function(){},pagination:!1,columns:l,dataSource:r,components:{body:{wrapper:g(r,s),row:un}}})),React.createElement("div",{style:{marginTop:5,marginBottom:5}},i),a.map((function(e,t){if(rn(e.schema))return React.createElement(Formily.React.RecursionField,{name:e.name,schema:e.schema,onlyRenderSelf:!0,key:t})})),u))}))}));dn.displayName="ArrayTable",dn.Column=function(){return React.createElement(React.Fragment,null)},$t.mixin(dn);dn.Addition=function(e){var n=$t.useArray(),r=React.useContext(cn),o=r.totalPage,i=void 0===o?0:o,a=r.pageSize,l=void 0===a?10:a,c=r.changePage,s=r.showPagination;return React.createElement($t.Addition,t({},e,{onClick:function(t){var r,o,a=(null===(r=null==n?void 0:n.field)||void 0===r?void 0:r.value.length)||0;s&&a===i*l+1&&Formily.Shared.isFn(c)&&c(i+1),null===(o=e.onClick)||void 0===o||o.call(e,t)}}))};var fn=Formily.React.observer((function(e){var t=Formily.React.useField(),n="".concat(t.title||"Untitled"," ").concat(e.index+1),r=t.errors.filter((function(n){return n.address.includes("".concat(t.address,".").concat(e.index))}));return r.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:r.length},n):React.createElement(React.Fragment,null,n)}),{scheduler:function(e){requestAnimationFrame(e)}}),vn=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Formily.React.useFieldSchema(),o=i(React.useState("tab-0"),2),a=o[0],l=o[1],c=Array.isArray(n.value)?n.value:[],s=(null==c?void 0:c.length)?c:[{}];return React.createElement(antd.Tabs,t({},e,{activeKey:a,onChange:function(e){l(e)},type:"editable-card",onEdit:function(e,t){var r,o;if("add"==t){var i=s.length;(null===(r=null==n?void 0:n.value)||void 0===r?void 0:r.length)?n.push(null):n.push(null,null),l("tab-".concat(i))}else if("remove"==t){var a=Number(null===(o=e.match(/-(\d+)/))||void 0===o?void 0:o[1]);a-1>-1&&l("tab-".concat(a-1)),n.remove(a)}}}),null==s?void 0:s.map((function(e,t){var n=Array.isArray(r.items)?r.items[t]:r.items,o="tab-".concat(t);return React.createElement(antd.Tabs.TabPane,{key:o,forceRender:!0,closable:0!==t,tab:React.createElement(fn,{index:t})},React.createElement(Formily.React.RecursionField,{schema:n,name:t}))})))}),{scheduler:function(e){requestAnimationFrame(e)}}),mn=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1},pn=function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Index"))>-1},hn=function(e){return mn(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Remove"))>-1}(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Copy"))>-1}(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"MoveDown"))>-1}(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"MoveUp"))>-1}(e)},yn=Formily.React.observer((function(e){var n=Formily.React.useField(),r=Formily.React.useFieldSchema(),o=Array.isArray(n.value)?n.value:[],i=v("formily-array-cards",e),a=e.onAdd,l=e.onCopy,c=e.onRemove,u=e.onMoveDown,d=e.onMoveUp;if(!r)throw new Error("can not found schema object");return React.createElement($t,{onAdd:a,onCopy:l,onRemove:c,onMoveUp:d,onMoveDown:u},function(){if(!(null==o?void 0:o.length))return React.createElement(antd.Card,t({},e,{onChange:function(){},className:s("".concat(i,"-item"),e.className),title:e.title||n.title}),React.createElement(antd.Empty,null))}(),null==o?void 0:o.map((function(o,a){var l=Array.isArray(r.items)?r.items[a]||r.items[0]:r.items,c=React.createElement("span",null,React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!!pn(e)},onlyRenderProperties:!0}),e.title||n.title),u=React.createElement("span",null,React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!!hn(e)},onlyRenderProperties:!0}),e.extra),d=React.createElement(Formily.React.RecursionField,{schema:l,name:a,filterProperties:function(e){return!pn(e)&&!hn(e)}});return React.createElement($t.Item,{key:a,index:a,record:function(){var e;return null===(e=n.value)||void 0===e?void 0:e[a]}},React.createElement(antd.Card,t({},e,{onChange:function(){},className:s("".concat(i,"-item"),e.className),title:c,extra:u}),d))})),r.reduceProperties((function(e,t,n){return mn(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null))}));yn.displayName="ArrayCards",$t.mixin(yn);var gn=function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Addition"))>-1},bn=function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Index"))>-1},Rn=function(e){return gn(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"Remove"))>-1}(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"MoveDown"))>-1}(e)||function(e){var t,n;return(null===(n=null===(t=e["x-component"])||void 0===t?void 0:t.indexOf)||void 0===n?void 0:n.call(t,"MoveUp"))>-1}(e)},wn=function(e){return Array.from({length:e}).map((function(e,t){return t}))},xn=function(e,t){return wn(e<t?e:t)},En=Formily.React.observer((function(e){var r=e.defaultOpenPanelCount,o=void 0===r?5:r,a=n(e,["defaultOpenPanelCount"]),l=Formily.React.useField(),c=Array.isArray(l.value)?l.value:[],u=i(React.useState(xn(c.length,o)),2),d=u[0],f=u[1],m=Formily.React.useFieldSchema(),p=v("formily-array-collapse",a);if(React.useEffect((function(){!l.modified&&c.length&&f(xn(c.length,o))}),[c.length,l]),!m)throw new Error("can not found schema object");var h=a.onAdd,y=a.onCopy,g=a.onRemove,b=a.onMoveDown,R=a.onMoveUp;return React.createElement($t,{onAdd:function(e){null==h||h(e),f(function(e,t){return e.length<=t?e.concat(t):e.reduce((function(e,n){return n<t?e.concat(n):n===t?e.concat([n,n+1]):e.concat(n+1)}),[])}(d,e))},onCopy:y,onRemove:g,onMoveUp:R,onMoveDown:b},function(){if(!c.length)return React.createElement(antd.Card,{className:s("".concat(p,"-item"),a.className)},React.createElement(antd.Empty,null))}(),React.createElement(antd.Collapse,t({},a,{activeKey:d,onChange:function(e){return f(Formily.Shared.toArr(e).map(Number))},className:s("".concat(p,"-item"),a.className)}),c.map((function(e,n){var r=Array.isArray(m.items)?m.items[n]||m.items[0]:m.items,o=l.query("".concat(l.address,".").concat(n)).get("componentProps"),i=r["x-component-props"],a=React.createElement($t.Item,{index:n,record:e},React.createElement(Formily.React.RecursionField,{schema:r,name:n,filterProperties:function(e){return!!Rn(e)},onlyRenderProperties:!0}),null==o?void 0:o.extra),c=React.createElement(Formily.React.RecursionField,{schema:r,name:n,filterProperties:function(e){return!bn(e)&&!Rn(e)}});return React.createElement(antd.Collapse.Panel,t({},i,o,{forceRender:!0,key:n,header:function(){var e=(null==o?void 0:o.header)||i.header||l.title,t=l.address.concat(n),a=l.form.queryFeedbacks({type:"error",address:"".concat(t,".**")});return React.createElement($t.Item,{index:n,record:function(){var e;return null===(e=l.value)||void 0===e?void 0:e[n]}},React.createElement(Formily.React.RecursionField,{schema:r,name:n,filterProperties:function(e){return!!bn(e)},onlyRenderProperties:!0}),a.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:a.length},e):e)}(),extra:a}),React.createElement($t.Item,{index:n,key:n,record:e},c))}))),m.reduceProperties((function(e,t,n){return gn(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null))})),Sn=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)};Sn.displayName="CollapsePanel",En.displayName="ArrayCollapse",En.CollapsePanel=Sn,$t.mixin(En);var Fn=Ut((function(e){var n=v("formily-array-items");return React.createElement("div",t({},e,{className:s("".concat(n,"-item"),e.className)}),e.children)})),Cn=Yt((function(e){var n=v("formily-array-items");return React.createElement("div",t({},e,{className:s("".concat(n,"-list"),e.className)}),e.children)})),On=Formily.React.observer((function(e){var n=Formily.React.useField(),r=v("formily-array-items"),o=React.useRef(null),i=Formily.React.useFieldSchema(),a=Formily.React.useFieldSchema().reduceProperties((function(e,t,n){return function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Addition"))>-1}(t)?React.createElement(Formily.React.RecursionField,{schema:t,name:n}):e}),null),l=Array.isArray(n.value)?n.value:[],c=e.onAdd,u=e.onCopy,d=e.onRemove,f=e.onMoveDown,m=e.onMoveUp;if(!i)throw new Error("can not found schema object");return React.createElement($t,{onAdd:c,onCopy:u,onRemove:d,onMoveUp:m,onMoveDown:f},React.createElement("div",t({},e,{ref:o,onChange:function(){},className:s(r,e.className)}),React.createElement(Cn,{list:l.slice(),className:"".concat(r,"-sort-helper"),onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex;n.move(t,r)}},null==l?void 0:l.map((function(e,t){var o=Array.isArray(i.items)?i.items[t]||i.items[0]:i.items;return React.createElement($t.Item,{key:t,index:t,record:function(){var e;return null===(e=n.value)||void 0===e?void 0:e[t]}},React.createElement(Fn,{key:"item-".concat(t),lockAxis:"y",index:t},React.createElement("div",{className:"".concat(r,"-item-inner")},React.createElement(Formily.React.RecursionField,{schema:o,name:t}))))}))),a))}));On.displayName="ArrayItems",On.Item=function(e){var n=v("formily-array-items");return React.createElement("div",t({},e,{onChange:function(){},className:s("".concat(n,"-").concat(e.type||"card"),e.className)}),e.children)},$t.mixin(On);var kn=function(e){return function(e){return Formily.Shared.isNum(e)||Formily.Shared.isStr(e)||Formily.Shared.isBool(e)||React.isValidElement(e)}(e)?{title:e}:e};function Pn(e,n,i){var a=this;(Formily.Shared.isFn(n)||React.isValidElement(n))&&(i=n,n="form-dialog");var l={host:document.createElement("div"),form:null,promise:null,openMiddlewares:[],confirmMiddlewares:[],cancelMiddlewares:[]},c=S(l.host,n),s=kn(e),u=t(t({},s),{afterClose:function(){var e;null===(e=null==s?void 0:s.afterClose)||void 0===e||e.call(s),c.unmount()}}),d=Formily.React.observer((function(){return React.createElement(React.Fragment,null,Formily.Shared.isFn(i)?i(l.form):i)})),f=function(e,n,i){return void 0===e&&(e=!0),React.createElement(Formily.React.Observer,null,(function(){return React.createElement(antd.Modal,t({},u,{visible:e,confirmLoading:l.form.submitting,onCancel:function(e){var t;!1!==(null===(t=null==u?void 0:u.onCancel)||void 0===t?void 0:t.call(u,e))&&i()},onOk:function(e){return r(a,void 0,void 0,(function(){var t;return o(this,(function(r){return!1!==(null===(t=null==u?void 0:u.onOk)||void 0===t?void 0:t.call(u,e))&&n(),[2]}))}))}}),React.createElement(Formily.React.FormProvider,{form:l.form},React.createElement(d,null)))}))};document.body.appendChild(l.host);var v={forOpen:function(e){return Formily.Shared.isFn(e)&&l.openMiddlewares.push(e),v},forConfirm:function(e){return Formily.Shared.isFn(e)&&l.confirmMiddlewares.push(e),v},forCancel:function(e){return Formily.Shared.isFn(e)&&l.cancelMiddlewares.push(e),v},open:function(e){return r(a,void 0,void 0,(function(){var t=this;return o(this,(function(n){return l.promise||(l.promise=new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,a=this;return o(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,F(u.loadingText,(function(){return Formily.Shared.applyMiddleware(e,l.openMiddlewares)}))];case 1:return e=s.sent(),l.form=l.form||Formily.Core.createForm(e),[3,3];case 2:return t=s.sent(),i(t),[3,3];case 3:return c.render((function(){return f(!0,(function(){l.form.submit((function(){return r(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,Formily.Shared.applyMiddleware(l.form,l.confirmMiddlewares)];case 1:return e.sent(),n(Formily.Reactive.toJS(l.form.values)),v.close(),[2]}}))}))})).catch((function(){}))}),(function(){return r(a,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,F(u.loadingText,(function(){return Formily.Shared.applyMiddleware(l.form,l.cancelMiddlewares)}))];case 1:return e.sent(),v.close(),[2]}}))}))}))})),[2]}}))}))}))),[2,l.promise]}))}))},close:function(){l.host&&c.render((function(){return f(!1)}))}};return v}Pn.Footer=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=v("modal");return React.useLayoutEffect((function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-content"));n&&(a.current||(a.current=n.querySelector(".".concat(l,"-footer")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-footer")),n.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Pn.Portal=E("form-dialog");var Tn=function(e){return function(e){return Formily.Shared.isNum(e)||Formily.Shared.isStr(e)||Formily.Shared.isBool(e)||React.isValidElement(e)}(e)?{title:e}:e};function Nn(e,n,i){var a=this;(Formily.Shared.isFn(n)||React.isValidElement(n))&&(i=n,n="form-drawer");var l={host:document.createElement("div"),openMiddlewares:[],form:null,promise:null},c=S(l.host,n),s=Tn(e),u=t(t({width:"40%"},s),{onClose:function(e){var t;!1!==(null===(t=null==s?void 0:s.onClose)||void 0===t?void 0:t.call(s,e))&&v.close()},afterVisibleChange:function(e){var t;null===(t=null==s?void 0:s.afterVisibleChange)||void 0===t||t.call(s,e),e||c.unmount()}}),d=Formily.React.observer((function(){return React.createElement(React.Fragment,null,Formily.Shared.isFn(i)?i(l.form):i)})),f=function(e){return void 0===e&&(e=!0),React.createElement(antd.Drawer,t({},u,{visible:e}),React.createElement(Formily.React.FormProvider,{form:l.form},React.createElement(d,null)))};document.body.appendChild(l.host);var v={forOpen:function(e){return Formily.Shared.isFn(e)&&l.openMiddlewares.push(e),v},open:function(e){return l.promise||(l.promise=new Promise((function(n,i){return r(a,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,F(u.loadingText,(function(){return Formily.Shared.applyMiddleware(e,l.openMiddlewares)}))];case 1:return e=o.sent(),l.form=l.form||Formily.Core.createForm(t(t({},e),{effects:function(t){var r;Formily.Core.onFormSubmitSuccess((function(){n(Formily.Reactive.toJS(t.values)),v.close()})),null===(r=null==e?void 0:e.effects)||void 0===r||r.call(e,t)}})),[3,3];case 2:return r=o.sent(),i(r),[3,3];case 3:return c.render((function(){return f(!1)})),setTimeout((function(){c.render((function(){return f(!0)}))}),16),[2]}}))}))}))),l.promise},close:function(){l.host&&c.render((function(){return f(!1)}))}};return v}Nn.Extra=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=v("drawer");return React.useLayoutEffect((function(){var e,n,r=null===(n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-wrapper-body")))||void 0===n?void 0:n.querySelector(".".concat(l,"-header"));r&&(a.current||(a.current=r.querySelector(".".concat(l,"-extra")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-extra")),r.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Nn.Footer=function(e){var t=React.useRef(),n=i(React.useState(),2),r=n[0],o=n[1],a=React.useRef(),l=v("drawer");return React.useLayoutEffect((function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.closest(".".concat(l,"-wrapper-body"));n&&(a.current||(a.current=n.querySelector(".".concat(l,"-footer")),a.current||(a.current=document.createElement("div"),a.current.classList.add("".concat(l,"-footer")),n.appendChild(a.current))),o(a.current))})),a.current=r,React.createElement("div",{ref:t,style:{display:"none"}},r&&ReactDOM.createPortal(e.children,r))},Nn.Portal=E("form-drawer");var An=function(e,t){return Formily.Shared.isValid(e)?function(e,t){var n;return Array.isArray(e)?-1===t?e[0]:null!==(n=e[t])&&void 0!==n?n:e[e.length-1]:e}(e,t):e},Mn=function(e){var r=React.useRef(null),o=e.breakpoints;if(!Formily.Shared.isArr(o))return{ref:r,props:e};var a=i(React.useState(e),2),l=a[0],c=a[1],s=function(){r.current&&c(function(e,r){var o=e.clientWidth,i=r.breakpoints,a=r.layout,l=r.labelAlign,c=r.wrapperAlign,s=r.labelCol,u=r.wrapperCol,d=n(r,["breakpoints","layout","labelAlign","wrapperAlign","labelCol","wrapperCol"]),f=function(e,t){for(var n=0;n<e.length;n++)if(t<=e[n])return n}(i,o);return t({layout:An(a,f),labelAlign:An(l,f),wrapperAlign:An(c,f),labelCol:An(s,f),wrapperCol:An(u,f)},d)}(r.current,e))};return React.useEffect((function(){var e=new ResizeObserver((function(){s()}));return r.current&&e.observe(r.current),s(),function(){e.disconnect()}}),[]),{ref:r,props:l}},Dn=React.createContext(null),_n=React.createContext(null),In=function(){return React.useContext(Dn)},Bn=function(){return React.useContext(_n)},zn=function(){return t(t({},In()),Bn())},jn=function(e){var r,o,i=e.shallow,a=void 0===i||i,l=e.children,c=e.prefixCls,u=e.className,d=e.style,f=n(e,["shallow","children","prefixCls","className","style"]),m=Mn(f),p=m.ref,h=m.props,y=In(),g=v("form",{prefixCls:c}),b=v("formily-layout",{prefixCls:c}),R=s(b,((r={})["".concat(g,"-").concat(h.layout)]=!0,r["".concat(g,"-rtl")]="rtl"===h.direction,r["".concat(g,"-").concat(h.size)]=h.size,r),u);return React.createElement("div",{ref:p,className:R,style:d},(o=t({},y),a?(h.size&&(o.size=h.size),h.colon&&(o.colon=h.colon)):Object.assign(o,h),React.createElement(Dn.Provider,{value:o},React.createElement(_n.Provider,{value:a?h:void 0},l))))};jn.useFormDeepLayout=In,jn.useFormShallowLayout=Bn,jn.useFormLayout=zn;var Ln=React.createContext("N/A"),Wn=Ln.Provider,Vn=function(e){var t=React.useContext(Ln)||"N/A";return Formily.Shared.isValid(e)&&""!==e?e:t},Xn=Formily.React.observer((function(e){var t,n,r,o,i=Formily.React.useField(),a=v("form-text",e),l=(null===(t=null==i?void 0:i.dataSource)||void 0===t?void 0:t.length)?i.dataSource:(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.length)?e.options:[],c=Vn(),u=function(t){var n,r,o=(null===(n=e.fieldNames)||void 0===n?void 0:n.label)||"label";return(null===(r=null==l?void 0:l.find((function(n){var r;return n[(null===(r=e.fieldNames)||void 0===r?void 0:r.value)||"value"]==(null==t?void 0:t.value)})))||void 0===r?void 0:r[o])||t.label||c};return React.createElement("div",{className:s(a,e.className),style:e.style},(r=e.value,(o="multiple"===e.mode||"tags"===e.mode?e.labelInValue?Formily.Shared.isArr(r)?r:[]:Formily.Shared.isArr(r)?r.map((function(e){return{label:e,value:e}})):[]:e.labelInValue?Formily.Shared.isValid(r)?[r]:[]:Formily.Shared.isValid(r)?[{label:r,value:r}]:[]).length?1===o.length?u(o[0]):o.map((function(e,t){return React.createElement(antd.Tag,{key:t},u(e))})):c))})),Yn=Formily.React.observer((function(e){var t,n,r,o,i=Formily.React.useField(),a=Vn(),l=v("form-text",e),c=(null===(t=null==i?void 0:i.dataSource)||void 0===t?void 0:t.length)?i.dataSource:(null===(n=null==e?void 0:e.treeData)||void 0===n?void 0:n.length)?e.treeData:[],u=function(e,t,n){for(var r,o=0;o<(null==t?void 0:t.length);o++){var i=t[o];if((null==i?void 0:i.value)===e)return null!==(r=null==i?void 0:i.label)&&void 0!==r?r:i[n];var a=u(e,null==i?void 0:i.children,n);if(a)return a}};return React.createElement("div",{className:s(l,e.className),style:e.style},(r=e.value,(null==(o=e.multiple?e.labelInValue?Formily.Shared.isArr(r)?r:[]:Formily.Shared.isArr(r)?r.map((function(e){return{label:e,value:e}})):[]:e.labelInValue?r?[r]:[]:r?[{label:r,value:r}]:[])?void 0:o.length)?o.map((function(t,n){var r=t.value,o=t.label;return React.createElement(antd.Tag,{key:n},u(r,c,e.treeNodeLabelProp)||o||a)})):React.createElement(antd.Tag,null,a)))})),Hn=Formily.React.observer((function(e){var t,n,r,o,i,a,l,c=Formily.React.useField(),u=Vn(),d=v("form-text",e),f=(null===(t=null==c?void 0:c.dataSource)||void 0===t?void 0:t.length)?c.dataSource:(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.length)?e.options:[];return React.createElement("div",{className:s(d,e.className),style:e.style},(r=Formily.Shared.toArr(e.value),i=e.multiple?r:[r],o=f,a=i.map((function(e){var t=[],n=o;return e.forEach((function(e){var r,o,i=function(e,t){return e.find((function(e){return e.value==t}))}(n,e);t.push({label:null!==(r=null==i?void 0:i.label)&&void 0!==r?r:"",value:null==i?void 0:i.value}),n=null!==(o=null==i?void 0:i.children)&&void 0!==o?o:[]})),t})),l=a.map((function(e){return e.map((function(e){return e.label})).join("/")})).join(" "),l||u))})),Un=function(e){var t=v("form-text",e);return React.createElement("div",{className:s(t,e.className),style:e.style},Vn(e.value))};Un.Input=function(e){var t=v("form-text",e);return React.createElement(antd.Space,{className:s(t,e.className),style:e.style},e.addonBefore,e.prefix,Vn(e.value),e.suffix,e.addonAfter)},Un.Select=Xn,Un.TreeSelect=Yn,Un.Cascader=Hn,Un.DatePicker=function(e){var t,n=Vn(),r=v("form-text",e);return React.createElement("div",{className:s(r,e.className)},(t=d(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},Un.DateRangePicker=function(e){var t,n=Vn(),r=v("form-text",e);return React.createElement("div",{className:s(r,e.className),style:e.style},(t=d(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},Un.TimePicker=function(e){var t,n=Vn(),r=v("form-text",e);return React.createElement("div",{className:s(r,e.className),style:e.style},(t=d(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},Un.TimeRangePicker=function(e){var t,n=Vn(),r=v("form-text",e);return React.createElement("div",{className:s(r,e.className),style:e.style},(t=d(e.value,e.format,n),Formily.Shared.isArr(t)?t.join("~"):t))},Un.Placeholder=Wn,Un.usePlaceholder=Vn,Un.NumberPicker=function(e){var t=v("form-text",e);return React.createElement(antd.Space,{className:s(t,e.className),style:e.style},e.addonBefore,e.prefix,Vn(e.formatter?e.formatter(String(e.value),{userTyping:!1,input:""}):e.value),e.suffix,e.addonAfter)};var Kn=Un;var qn={error:React.createElement(icons.CloseCircleOutlined,null),success:React.createElement(icons.CheckCircleOutlined,null),warning:React.createElement(icons.ExclamationCircleOutlined,null)},Gn=function(e){var r,o,a,l,c,u=e.children,d=n(e,["children"]),f=i(React.useState(!1),2),m=f[0],p=f[1],h=function(e){var n,r,o,i,a,l,c,s,u,d,f,v,m,p,h,y,g,b,R,w,x,E,S,F=zn(),C=null!==(r=null!==(n=e.layout)&&void 0!==n?n:F.layout)&&void 0!==r?r:"horizontal";return t(t({},e),{layout:C,colon:null!==(o=e.colon)&&void 0!==o?o:F.colon,labelAlign:"vertical"===C?null!==(i=e.labelAlign)&&void 0!==i?i:"left":null!==(l=null!==(a=e.labelAlign)&&void 0!==a?a:F.labelAlign)&&void 0!==l?l:"right",labelWrap:null!==(c=e.labelWrap)&&void 0!==c?c:F.labelWrap,labelWidth:null!==(s=e.labelWidth)&&void 0!==s?s:F.labelWidth,wrapperWidth:null!==(u=e.wrapperWidth)&&void 0!==u?u:F.wrapperWidth,labelCol:null!==(d=e.labelCol)&&void 0!==d?d:F.labelCol,wrapperCol:null!==(f=e.wrapperCol)&&void 0!==f?f:F.wrapperCol,wrapperAlign:null!==(v=e.wrapperAlign)&&void 0!==v?v:F.wrapperAlign,wrapperWrap:null!==(m=e.wrapperWrap)&&void 0!==m?m:F.wrapperWrap,fullness:null!==(p=e.fullness)&&void 0!==p?p:F.fullness,size:null!==(h=e.size)&&void 0!==h?h:F.size,inset:null!==(y=e.inset)&&void 0!==y?y:F.inset,asterisk:e.asterisk,requiredMark:F.requiredMark,optionalMarkHidden:e.optionalMarkHidden,bordered:null!==(g=e.bordered)&&void 0!==g?g:F.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(R=null!==(b=e.feedbackLayout)&&void 0!==b?b:F.feedbackLayout)&&void 0!==R?R:"loose",tooltipLayout:null!==(x=null!==(w=e.tooltipLayout)&&void 0!==w?w:F.tooltipLayout)&&void 0!==x?x:"icon",tooltipIcon:null!==(S=null!==(E=e.tooltipIcon)&&void 0!==E?E:F.tooltipIcon)&&void 0!==S?S:React.createElement(icons.QuestionCircleOutlined,null)})}(d),y=React.useContext(antd.ConfigProvider.ConfigContext).locale,g=function(){var e=i(React.useState(!1),2),t=e[0],n=e[1],r=React.useRef(),o=React.useRef(),a=zn(),l=JSON.stringify(a.labelCol);return React.useEffect((function(){requestAnimationFrame((function(){if(r.current&&o.current){var e=o.current.getBoundingClientRect().width,i=r.current.getBoundingClientRect().width;e&&i&&i<e?t||n(!0):t&&n(!1)}}))}),[l]),{overflow:t,containerRef:r,contentRef:o}}(),b=g.containerRef,R=g.contentRef,w=g.overflow,x=h.label,E=h.style,S=h.layout,F=h.colon,O=void 0===F||F,k=h.addonBefore,P=h.addonAfter,T=h.asterisk,N=h.requiredMark,A=void 0===N||N,M=h.optionalMarkHidden,D=void 0!==M&&M,_=h.feedbackStatus,I=h.extra,B=h.feedbackText,z=h.fullness,j=h.feedbackLayout,L=h.feedbackIcon,W=h.enableOutlineFeedback,V=void 0===W||W,X=h.getPopupContainer,Y=h.inset,H=h.bordered,U=void 0===H||H,K=h.labelWidth,q=h.wrapperWidth,G=h.labelCol,J=h.wrapperCol,Q=h.labelAlign,$=h.wrapperAlign,Z=void 0===$?"left":$,ee=h.size,te=h.labelWrap,ne=h.wrapperWrap,re=h.tooltipLayout,oe=h.tooltip,ie=h.tooltipIcon,ae=t({},h.labelStyle),le=t({},h.wrapperStyle),ce=!1;(K||q)&&(K&&(ae.width="auto"===K?void 0:K,ae.maxWidth="auto"===K?void 0:K),q&&(le.width="auto"===q?void 0:q,le.maxWidth="auto"===q?void 0:q)),(G||J)&&(ae.width||le.width||"vertical"===S||(ce=!0));var se=v("formily-item",d),ue="popover"===j?React.createElement(antd.Popover,{autoAdjustOverflow:!0,placement:"top",content:React.createElement("div",{className:s((r={},r["".concat(se,"-").concat(_,"-help")]=!!_,r["".concat(se,"-help")]=!0,r))},qn[_]," ",B),visible:!!B,getPopupContainer:X},u):u,de=function(e){return!ReactIs.isElement(e)}(oe)?React.createElement(antd.Tooltip,t({},oe)):oe;return React.createElement("div",t({},C(d),{style:t(t({},E),{}),"data-grid-span":d.gridSpan,className:s((o={},o["".concat(se)]=!0,o["".concat(se,"-layout-").concat(S)]=!0,o["".concat(se,"-").concat(_)]=V&&!!_,o["".concat(se,"-feedback-has-text")]=!!B,o["".concat(se,"-size-").concat(ee)]=!!ee,o["".concat(se,"-feedback-layout-").concat(j)]=!!j,o["".concat(se,"-fullness")]=!!z||!!Y||!!L,o["".concat(se,"-inset")]=!!Y,o["".concat(se,"-active")]=m,o["".concat(se,"-inset-active")]=!!Y&&m,o["".concat(se,"-label-align-").concat(Q)]=!0,o["".concat(se,"-control-align-").concat(Z)]=!0,o["".concat(se,"-label-wrap")]=!!te,o["".concat(se,"-control-wrap")]=!!ne,o["".concat(se,"-bordered-none")]=!1===U||!!Y||!!L,o[d.className]=!!d.className,o)),onFocus:function(){(L||Y)&&p(!0)},onBlur:function(){(L||Y)&&p(!1)}}),function(){var e;return x?React.createElement("div",{className:s((e={},e["".concat(se,"-label")]=!0,e["".concat(se,"-label-tooltip")]=oe&&"text"===re||w,e["".concat(se,"-item-col-").concat(G)]=ce&&!!G,e)),style:ae},function(){var e,t=React.createElement("div",{className:"".concat(se,"-label-content"),ref:b},React.createElement("span",{ref:R},T&&!0===A&&React.createElement("span",{className:"".concat(se,"-asterisk")},"*"),React.createElement("label",{htmlFor:d.labelFor},x),!T&&"optional"===A&&!D&&React.createElement("span",{className:"".concat(se,"-optional")},null===(e=null==y?void 0:y.Form)||void 0===e?void 0:e.optional)));return"text"===re&&oe||w?React.createElement(antd.Tooltip,{placement:"top",align:{offset:[0,10]},title:w?React.createElement("div",null,React.createElement("div",null,x),React.createElement("div",null,de)):de},t):t}(),function(){if(oe&&"icon"===re&&!w)return React.createElement("span",{className:"".concat(se,"-label-tooltip-icon")},React.createElement(antd.Tooltip,{placement:"top",align:{offset:[0,2]},title:de},ie))}()," "!==x&&React.createElement("span",{className:"".concat(se,"-colon")},O?":":"")):null}(),React.createElement("div",{className:s((a={},a["".concat(se,"-control")]=!0,a["".concat(se,"-item-col-").concat(J)]=ce&&!!J&&x,a))},React.createElement("div",{className:s("".concat(se,"-control-content"))},k&&React.createElement("div",{className:s("".concat(se,"-addon-before"))},k),React.createElement("div",{style:le,className:s((l={},l["".concat(se,"-control-content-component")]=!0,l["".concat(se,"-control-content-component-has-feedback-icon")]=!!L,l))},React.createElement(_n.Provider,{value:void 0},ue),L&&React.createElement("div",{className:s("".concat(se,"-feedback-icon"))},L)),P&&React.createElement("div",{className:s("".concat(se,"-addon-after"))},P)),!!B&&"popover"!==j&&"none"!==j&&React.createElement("div",{className:s((c={},c["".concat(se,"-").concat(_,"-help")]=!!_,c["".concat(se,"-help")]=!0,c["".concat(se,"-help-enter")]=!0,c["".concat(se,"-help-enter-active")]=!0,c))},B),I&&React.createElement("div",{className:s("".concat(se,"-extra"))},I)))},Jn=Formily.React.connect(Gn,Formily.React.mapProps((function(e,t){if(Formily.Core.isVoidField(t))return{label:t.title||e.label,asterisk:e.asterisk,extra:e.extra||t.description};if(!t)return e;return{label:e.label||t.title,feedbackStatus:t.validating?"pending":t.decoratorProps.feedbackStatus||t.validateStatus,feedbackText:function(){var n=function(e){return e.reduce((function(t,n,r){return n?r<e.length-1?t.concat([n,", "]):t.concat([n]):t}),[])};if(!t.validating)return e.feedbackText?e.feedbackText:t.selfErrors.length?n(t.selfErrors):t.selfWarnings.length?n(t.selfWarnings):t.selfSuccesses.length?n(t.selfSuccesses):void 0}(),asterisk:!(!t.required||"readPretty"===t.pattern)||"asterisk"in e&&e.asterisk,optionalMarkHidden:"readPretty"===t.pattern&&!("asterisk"in e),extra:e.extra||t.description}})));Jn.BaseItem=Gn;var Qn=Formily.React.connect(Formily.React.observer((function(e){var r,o=e.formStep,i=e.className,a=n(e,["formStep","className"]),l=Formily.React.useField(),c=v("formily-step",a),u=function(e){var t=[];return e.mapProperties((function(e,n){var r;(null===(r=e["x-component"])||void 0===r?void 0:r.indexOf("StepPane"))>-1&&t.push({name:n,props:e["x-component-props"],schema:e})})),t}(Formily.React.useFieldSchema()),d=a.current||(null==o?void 0:o.current)||0;return null===(r=null==o?void 0:o.connect)||void 0===r||r.call(o,u,l),React.createElement("div",{className:s(c,i)},React.createElement(antd.Steps,t({},a,{style:t({marginBottom:10},a.style),current:d}),u.map((function(e,n){var r=e.props;return React.createElement(antd.Steps.Step,t({},r,{key:n}))}))),u.map((function(e,t){var n=e.name,r=e.schema;if(t===d)return React.createElement(Formily.React.RecursionField,{key:t,name:n,schema:r})})))})));Qn.StepPane=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},Qn.createFormStep=function(e){void 0===e&&(e=0);var t=Formily.Reactive.define({form:null,field:null,steps:[]},{form:Formily.Reactive.observable.ref,field:Formily.Reactive.observable.ref,steps:Formily.Reactive.observable.shallow}),n=Formily.Reactive.action.bound((function(e){var n=t.steps[e];t.steps.forEach((function(e){var r=e.name;t.form.query("".concat(t.field.address,".").concat(r)).take((function(e){r===n.name?e.setDisplay("visible"):e.setDisplay("hidden")}))}))})),i=Formily.Reactive.action.bound((function(){l.allowNext&&l.setCurrent(l.current+1)})),a=Formily.Reactive.action.bound((function(){l.allowBack&&l.setCurrent(l.current-1)})),l=Formily.Reactive.model({connect:function(e,n){t.steps=e,t.form=null==n?void 0:n.form,t.field=n},current:e,setCurrent:function(e){n(e),l.current=e},get allowNext(){return l.current<t.steps.length-1},get allowBack(){return l.current>0},next:function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.form.validate()];case 1:return e.sent(),t.form.valid&&i(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},back:function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return a(),[2]}))}))},submit:function(e){var n,i;return r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,null===(i=null===(n=t.form)||void 0===n?void 0:n.submit)||void 0===i?void 0:i.call(n,e)]}))}))}});return Formily.Reactive.markRaw(l)};var $n,Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zn.apply(this,arguments)},er=function(e){return 1===e.nodeType},tr=function(){function e(e){var t=this;this.childList=[],this.handler=function(e){e.forEach((function(e){"childList"===e.type&&(e.addedNodes.forEach((function(e){er(e)&&t.addObserver(e)})),e.removedNodes.forEach((function(e){er(e)&&t.removeObserver(e)})))})),t.callback(e,t.observer)},this.observe=function(e,n){t.init=n,t.observeChildList(e),t.observer.observe(e,Zn(Zn({},t.init),{subtree:!1,childList:!0,characterData:!1,characterDataOldValue:!1,attributeOldValue:!1}))},this.disconnect=function(){t.observer.disconnect()},this.callback=e,this.observer=new MutationObserver(this.handler)}return e.prototype.observeChildList=function(e){var t=this;Array.from(e.children).forEach((function(e){t.addObserver(e)}))},e.prototype.addObserver=function(e){var t=this;if(!this.childList.find((function(t){return t.element===e}))){var n=this.childList.length,r={element:e,observer:new MutationObserver(this.callback),dispose:function(){r.observer&&(r.observer.disconnect(),delete r.observer,t.childList.splice(n,1))}};r.observer.observe(r.element,Zn(Zn({},this.init),{subtree:!1,childList:!1,characterData:!1,characterDataOldValue:!1,attributeOldValue:!1})),this.childList.push(r)}},e.prototype.removeObserver=function(e){var t,n=this.childList.find((function(t){return t.element===e}));n&&(null===(t=n.dispose)||void 0===t||t.call(n))},e}(),nr=[],rr="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}($n||($n={}));var or,ir=function(e){return Object.freeze(e)},ar=function(e,t){this.inlineSize=e,this.blockSize=t,ir(this)},lr=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ir(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),cr=function(e){return e instanceof SVGElement&&"getBBox"in e},sr=function(e){if(cr(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},ur=function(e){var t,n;if(e instanceof Element)return!0;var r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},dr="undefined"!=typeof window?window:{},fr=new WeakMap,vr=/auto|scroll/,mr=/^tb|vertical/,pr=/msie|trident/i.test(dr.navigator&&dr.navigator.userAgent),hr=function(e){return parseFloat(e||"0")},yr=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new ar((n?t:e)||0,(n?e:t)||0)},gr=ir({devicePixelContentBoxSize:yr(),borderBoxSize:yr(),contentBoxSize:yr(),contentRect:new lr(0,0,0,0)}),br=function(e,t){if(void 0===t&&(t=!1),fr.has(e)&&!t)return fr.get(e);if(sr(e))return fr.set(e,gr),gr;var n=getComputedStyle(e),r=cr(e)&&e.ownerSVGElement&&e.getBBox(),o=!pr&&"border-box"===n.boxSizing,i=mr.test(n.writingMode||""),a=!r&&vr.test(n.overflowY||""),l=!r&&vr.test(n.overflowX||""),c=r?0:hr(n.paddingTop),s=r?0:hr(n.paddingRight),u=r?0:hr(n.paddingBottom),d=r?0:hr(n.paddingLeft),f=r?0:hr(n.borderTopWidth),v=r?0:hr(n.borderRightWidth),m=r?0:hr(n.borderBottomWidth),p=d+s,h=c+u,y=(r?0:hr(n.borderLeftWidth))+v,g=f+m,b=l?e.offsetHeight-g-e.clientHeight:0,R=a?e.offsetWidth-y-e.clientWidth:0,w=o?p+y:0,x=o?h+g:0,E=r?r.width:hr(n.width)-w-R,S=r?r.height:hr(n.height)-x-b,F=E+p+R+y,C=S+h+b+g,O=ir({devicePixelContentBoxSize:yr(Math.round(E*devicePixelRatio),Math.round(S*devicePixelRatio),i),borderBoxSize:yr(F,C,i),contentBoxSize:yr(E,S,i),contentRect:new lr(d,c,E,S)});return fr.set(e,O),O},Rr=function(e,t,n){var r=br(e,n),o=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case $n.DEVICE_PIXEL_CONTENT_BOX:return a;case $n.BORDER_BOX:return o;default:return i}},wr=function(e){var t=br(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=ir([t.borderBoxSize]),this.contentBoxSize=ir([t.contentBoxSize]),this.devicePixelContentBoxSize=ir([t.devicePixelContentBoxSize])},xr=function(e){if(sr(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Er=function(){var e=1/0,t=[];nr.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new wr(t.target),o=xr(t.target);r.push(n),t.lastReportedSize=Rr(t.target,t.observedBox),o<e&&(e=o)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},Sr=function(e){nr.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(xr(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Fr=function(){var e,t=0;for(Sr(t);nr.some((function(e){return e.activeTargets.length>0}));)t=Er(),Sr(t);return nr.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:rr}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=rr),window.dispatchEvent(e)),t>0},Cr=[],Or=function(e){if(!or){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Cr.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),or=function(){n.textContent=""+(t?t--:t++)}}Cr.push(e),or()},kr=0,Pr={attributes:!0,characterData:!0,childList:!0,subtree:!0},Tr=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Nr=function(e){return void 0===e&&(e=0),Date.now()+e},Ar=!1,Mr=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!Ar){Ar=!0;var n,r=Nr(e);n=function(){var n=!1;try{n=Fr()}finally{if(Ar=!1,e=r-Nr(),!kr)return;n?t.run(1e3):e>0?t.run(e):t.start()}},Or((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Pr)};document.body?t():dr.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Tr.forEach((function(t){return dr.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Tr.forEach((function(t){return dr.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Dr=function(e){!kr&&e>0&&Mr.start(),!(kr+=e)&&Mr.stop()},_r=function(){function e(e,t){this.target=e,this.observedBox=t||$n.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Rr(this.target,this.observedBox,!0);return e=this.target,cr(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Ir=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},Br=new WeakMap,zr=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},jr=function(){function e(){}return e.connect=function(e,t){var n=new Ir(e,t);Br.set(e,n)},e.observe=function(e,t,n){var r=Br.get(e),o=0===r.observationTargets.length;zr(r.observationTargets,t)<0&&(o&&nr.push(r),r.observationTargets.push(new _r(t,n&&n.box)),Dr(1),Mr.schedule())},e.unobserve=function(e,t){var n=Br.get(e),r=zr(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&nr.splice(nr.indexOf(n),1),n.observationTargets.splice(r,1),Dr(-1))},e.disconnect=function(e){var t=this,n=Br.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Lr=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");jr.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ur(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");jr.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ur(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");jr.unobserve(this,e)},e.prototype.disconnect=function(){jr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Wr=function(){return Wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wr.apply(this,arguments)},Vr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Xr=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Yr=/span\s*(\d+)/,Hr=function(e,t){return void 0===t&&(t=!1),e.reduce((function(e,n){var r;return t||n.visible?-1===n.originSpan?e+(null!==(r=n.span)&&void 0!==r?r:1):e+n.span:e}),0)},Ur=function(e,t){return void 0===t&&(t=!1),e.reduce((function(e,n){var r;return t||n.visible?-1===n.originSpan?e+(null!==(r=n.span)&&void 0!==r?r:1):e+n.originSpan:e}),0)},Kr=function(e){var t,n;return Number(null!==(n=null===(t=String(e).match(Yr))||void 0===t?void 0:t[1])&&void 0!==n?n:1)},qr=function(e,t){return function(e){return null!=e}(e)?function(e,t){var n;return Array.isArray(e)?-1===t?e[0]:null!==(n=e[t])&&void 0!==n?n:e[e.length-1]:e}(e,t.breakpoint):e},Gr=function(e){return Promise.resolve(0).then(e)},Jr=function(){function e(e){var t=this;this.width=0,this.height=0,this.children=[],this.childTotalColumns=0,this.shadowChildTotalColumns=0,this.childOriginTotalColumns=0,this.shadowChildOriginTotalColumns=0,this.ready=!1,this.connect=function(e){if(e){t.container=e;var n=Formily.Reactive.batch.bound((function(){r(),t.ready=!0})),r=Formily.Reactive.batch.bound((function(){var e;t.children=(e=t.container.children,Array.from(e).reduce((function(e,t,n){var r,o=getComputedStyle(t),i=!("none"===o.display),a=t.getAttribute("data-grid-span"),l=null!==(r=Kr(o.gridColumnStart))&&void 0!==r?r:1,c={index:n,span:l,visible:i,originSpan:Number(null!=a?a:l),element:t};return a||t.setAttribute("data-grid-span",String(l)),e.concat(c)}),[])),t.childTotalColumns=Hr(t.children),t.shadowChildTotalColumns=Hr(t.children,!0),t.childOriginTotalColumns=Ur(t.children),t.shadowChildOriginTotalColumns=Ur(t.children,!0);var n,r,o,i,a,l=t.container.getBoundingClientRect();l.width&&l.height&&(t.width=l.width,t.height=l.height),r=0,o=0,i=0,a=0,(n=t).ready&&(n.children=n.children.map((function(e){var t,l=r%n.columns,c=o%n.columns,s=n.columns-l,u=e.originSpan,d=u>n.columns?n.columns:u,f=n.options.strictAutoFit?d:d>s?s:d,v=-1===u?"span ".concat(s," / -1"):"span ".concat(f," / auto");return e.element.style.gridColumn!==v&&(e.element.style.gridColumn=v),e.visible&&(r+=f),o+=f,0===l&&i++,0==c&&a++,e.shadowRow=a,e.shadowColumn=c+1,e.visible&&(e.row=i,e.column=l+1),(null===(t=n.options)||void 0===t?void 0:t.shouldVisible)&&(n.options.shouldVisible(e,n)?(e.visible||(e.element.style.display=""),e.visible=!0):(e.visible&&(e.element.style.display="none"),e.visible=!1)),e}))),Gr((function(){var e,n;null===(n=null===(e=t.options)||void 0===e?void 0:e.onDigest)||void 0===n||n.call(e,t)})),t.ready||Gr((function(){var e,n;null===(n=null===(e=t.options)||void 0===e?void 0:e.onInitialized)||void 0===n||n.call(e,t)}))})),o=new tr(r),i=new Lr((function(){requestAnimationFrame((function(){r()}))})),a=Formily.Reactive.reaction((function(){return Wr({},t.options)}),r);return i.observe(t.container),o.observe(t.container,{attributeFilter:["data-grid-span"],attributes:!0}),n(),function(){i.unobserve(t.container),i.disconnect(),o.disconnect(),a(),t.children=[]}}return function(){}},this.options=Wr({breakpoints:[720,1280,1920],columnGap:8,rowGap:4,minWidth:100,colWrap:!0,strictAutoFit:!1},e),Formily.Reactive.define(this,{options:Formily.Reactive.observable.shallow,width:Formily.Reactive.observable.ref,height:Formily.Reactive.observable.ref,ready:Formily.Reactive.observable.ref,children:Formily.Reactive.observable.ref,childOriginTotalColumns:Formily.Reactive.observable.ref,shadowChildOriginTotalColumns:Formily.Reactive.observable.ref,shadowChildTotalColumns:Formily.Reactive.observable.ref,childTotalColumns:Formily.Reactive.observable.ref,columns:Formily.Reactive.observable.computed,templateColumns:Formily.Reactive.observable.computed,gap:Formily.Reactive.observable.computed,maxColumns:Formily.Reactive.observable.computed,minColumns:Formily.Reactive.observable.computed,maxWidth:Formily.Reactive.observable.computed,minWidth:Formily.Reactive.observable.computed,breakpoints:Formily.Reactive.observable.computed,breakpoint:Formily.Reactive.observable.computed,rowGap:Formily.Reactive.observable.computed,columnGap:Formily.Reactive.observable.computed,colWrap:Formily.Reactive.observable.computed})}return Object.defineProperty(e.prototype,"breakpoints",{get:function(){return this.options.breakpoints},set:function(e){this.options.breakpoints=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakpoint",{get:function(){return function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t<=e[n])return n;return-1}(this.options.breakpoints,this.width)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var e;return null!==(e=qr(this.options.maxWidth,this))&&void 0!==e?e:1/0},set:function(e){this.options.maxWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){var e;return null!==(e=qr(this.options.minWidth,this))&&void 0!==e?e:100},set:function(e){this.options.minWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){var e;return null!==(e=qr(this.options.maxColumns,this))&&void 0!==e?e:1/0},set:function(e){this.options.maxColumns=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRows",{get:function(){var e;return null!==(e=this.options.maxRows)&&void 0!==e?e:1/0},set:function(e){this.options.maxRows=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minColumns",{get:function(){var e;return null!==(e=qr(this.options.minColumns,this))&&void 0!==e?e:1},set:function(e){this.options.minColumns=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGap",{get:function(){var e;return null!==(e=qr(this.options.rowGap,this))&&void 0!==e?e:5},set:function(e){this.options.rowGap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnGap",{get:function(){var e;return null!==(e=qr(this.options.columnGap,this))&&void 0!==e?e:10},set:function(e){this.options.columnGap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colWrap",{get:function(){var e;return null===(e=qr(this.options.colWrap,this))||void 0===e||e},set:function(e){this.options.colWrap=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){if(!this.ready)return 0;var e=this.childOriginTotalColumns;if(!1===this.colWrap)return e;var t=this.childSize,n=Math.round(this.width/(this.maxWidth+this.columnGap)),r=Math.min(e,n),o=this.options.strictAutoFit?n:r,i=Math.round(this.width/(this.minWidth+this.columnGap)),a=Math.min(e,i),l=this.options.strictAutoFit?i:a,c=Math.min(t,e,o,l),s=Math.max(t,e,o,l),u=function(e,t,n,r,o,i){for(var a=[],l=n;l<=t;l++){var c=e-(l-1)*i,s=c/l;s>=o&&s<=r?a.push(l):s<o?a.push(Math.min(Math.floor(c/o),t)):s>r&&a.push(Math.min(Math.floor(c/r),t))}return Math.max.apply(Math,Xr([],Vr(a),!1))}(this.width,s,c,this.maxWidth,this.minWidth,this.columnGap);return u>=this.maxColumns?this.maxColumns:u<=this.minColumns?this.minColumns:u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return Math.ceil(this.childTotalColumns/this.columns)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowRows",{get:function(){return Math.ceil(this.shadowChildTotalColumns/this.columns)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateColumns",{get:function(){if(!this.width)return"";if(this.maxWidth===1/0)return"repeat(".concat(this.columns,",minmax(0,1fr))");if(!0!==this.options.strictAutoFit){var e=(this.width-(this.columns-1)*this.columnGap)/this.columns;if(e<this.minWidth||e>this.maxWidth)return"repeat(".concat(this.columns,",minmax(0,1fr))")}return"repeat(".concat(this.columns,",minmax(").concat(this.minWidth,"px,").concat(this.maxWidth,"px))")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gap",{get:function(){return"".concat(this.rowGap,"px ").concat(this.columnGap,"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childSize",{get:function(){return this.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullnessLastColumn",{get:function(){var e;return this.columns===(null===(e=this.children[this.childSize-1])||void 0===e?void 0:e.span)},enumerable:!1,configurable:!0}),e.id=function(e){return void 0===e&&(e={}),JSON.stringify(["maxRows","maxColumns","minColumns","maxWidth","minWidth","breakpoints","columnGap","rowGap","colWrap","strictAutoFit"].map((function(t){return e[t]})))},e}(),Qr=React.createContext(null),$r=function(e){return Formily.Reactive.markRaw(new Jr(e))},Zr=function(){return React.useContext(Qr)},eo=function(e){return void 0===e&&(e=1),e},to=function(e){return void 0===e&&(e=1),e},no=Formily.React.observer((function(e){var r,o,i=e.children,a=e.className,l=e.style,c=n(e,["children","className","style"]),u=zn(),d=t({columnGap:null!==(r=null==u?void 0:u.gridColumnGap)&&void 0!==r?r:8,rowGap:null!==(o=null==u?void 0:u.gridRowGap)&&void 0!==o?o:4},c),f=React.useMemo((function(){return Formily.Reactive.markRaw((null==d?void 0:d.grid)?d.grid:new Jr(d))}),[Jr.id(d)]),m=React.useRef(),p=v("formily-grid",c),h=C(c);return React.useLayoutEffect((function(){return f.connect(m.current)}),[f]),React.createElement(Qr.Provider,{value:f},React.createElement("div",t({},h,{className:s("".concat(p,"-layout"),a),style:t(t({},l),{gridTemplateColumns:f.templateColumns,gap:f.gap}),ref:m}),i))}),{forwardRef:!0}),ro=Formily.React.observer((function(e){var r=e.gridSpan,o=void 0===r?1:r,i=e.children,a=n(e,["gridSpan","children"]);return React.createElement("div",t({},a,{style:a.style,"data-grid-span":o}),i)}));no.createFormGrid=$r,no.useGridSpan=eo,no.useGridColumn=to,no.useFormGrid=Zr,no.GridColumn=ro;var oo=Formily.React.observer((function(e){var t=Formily.React.useField(),n=t.form.queryFeedbacks({type:"error",address:"".concat(t.address.concat(e.name),".*")});return n.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:n.length},e.tab):React.createElement(React.Fragment,null,e.tab)})),io=function(e){var t=Formily.Reactive.model({activeKey:e,setActiveKey:function(e){t.activeKey=e}});return Formily.Reactive.markRaw(t)},ao=Formily.React.observer((function(e){var r=e.formTab,o=n(e,["formTab"]),i=function(){var e=Formily.React.useField(),n=Formily.React.useFieldSchema(),r=[];return n.mapProperties((function(n,o){var i,a,l=e.query(e.address.concat(o)).take();"none"!==(null==l?void 0:l.display)&&"hidden"!==(null==l?void 0:l.display)&&(null===(i=n["x-component"])||void 0===i?void 0:i.indexOf("TabPane"))>-1&&r.push({name:o,props:t({key:(null===(a=null==n?void 0:n["x-component-props"])||void 0===a?void 0:a.key)||o},null==n?void 0:n["x-component-props"]),schema:n})})),r}(),a=React.useMemo((function(){return r||io()}),[]),l=v("formily-tab",o),c=o.activeKey||(null==a?void 0:a.activeKey);return React.createElement(antd.Tabs,t({},o,{className:s(l,o.className),activeKey:c,onChange:function(e){var t,n;null===(t=o.onChange)||void 0===t||t.call(o,e),null===(n=null==a?void 0:a.setActiveKey)||void 0===n||n.call(a,e)}}),i.map((function(e,n){var r=e.props,o=e.schema,i=e.name;return React.createElement(antd.Tabs.TabPane,t({key:n},r,{tab:React.createElement(oo,{name:i,tab:r.tab}),forceRender:!0}),React.createElement(Formily.React.RecursionField,{schema:o,name:i}))})))}));ao.TabPane=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},ao.createFormTab=io;var lo=function(e){var t=Formily.Reactive.model({activeKeys:e,setActiveKeys:function(e){t.activeKeys=e},hasActiveKey:function(e){if(Array.isArray(t.activeKeys)){if(t.activeKeys.includes(e))return!0}else if(t.activeKeys==e)return!0;return!1},addActiveKey:function(e){t.hasActiveKey(e)||(t.activeKeys=Formily.Shared.toArr(t.activeKeys).concat(e))},removeActiveKey:function(e){Array.isArray(t.activeKeys)?t.activeKeys=t.activeKeys.filter((function(t){return t!=e})):t.activeKeys=""},toggleActiveKey:function(e){t.hasActiveKey(e)?t.removeActiveKey(e):t.addActiveKey(e)}});return Formily.Reactive.markRaw(t)},co=Formily.React.observer((function(e){var r=e.formCollapse,o=n(e,["formCollapse"]),i=Formily.React.useField(),a=function(){var e=Formily.React.useField(),n=Formily.React.useFieldSchema(),r=[];return n.mapProperties((function(n,o){var i,a=e.query(e.address.concat(o)).take();if("none"!==(null==a?void 0:a.display)&&"hidden"!==(null==a?void 0:a.display)&&(null===(i=n["x-component"])||void 0===i?void 0:i.indexOf("CollapsePanel"))>-1){var l=null==a?void 0:a.componentProps;r.push({name:o,props:t(t({},l),{key:(null==l?void 0:l.key)||o}),schema:n})}})),r}(),l=v("formily-collapse",o),c=React.useMemo((function(){return r||lo(o.defaultActiveKey)}),[]),u=function(e,t){var n=i.form.queryFeedbacks({type:"error",address:"".concat(i.address.concat(e),".*")});return n.length?React.createElement(antd.Badge,{size:"small",className:"errors-badge",count:n.length},t.header):t.header};return React.createElement(antd.Collapse,t({},o,{className:s(l,o.className),activeKey:function(){var e;return o.activeKey?o.activeKey:(null==c?void 0:c.activeKeys)?null==c?void 0:c.activeKeys:o.accordion?null===(e=a[0])||void 0===e?void 0:e.name:a.map((function(e){return e.name}))}(),onChange:function(e){var t,n;null===(t=null==o?void 0:o.onChange)||void 0===t||t.call(o,e),null===(n=null==c?void 0:c.setActiveKeys)||void 0===n||n.call(c,e)}}),a.map((function(e,n){var r=e.props,o=e.schema,i=e.name;return React.createElement(antd.Collapse.Panel,t({key:n},r,{header:u(i,r),forceRender:!0}),React.createElement(Formily.React.RecursionField,{schema:o,name:i}))})))}));co.CollapsePanel=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},co.createFormCollapse=lo;var so=c((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),uo=l(c((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,so(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),fo=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,mo=Object.prototype.propertyIsEnumerable;function po(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ho=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=po(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))vo.call(n,a)&&(o[a]=n[a]);if(fo){r=fo(n);for(var l=0;l<r.length;l++)mo.call(n,r[l])&&(o[r[l]]=n[r[l]])}}return o},yo="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",go=Function.call.bind(Object.prototype.hasOwnProperty),bo=function(){};if("production"!==process.env.NODE_ENV){var Ro=yo,wo={},xo=go;bo=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function Eo(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(xo(e,i)){var a;try{if("function"!=typeof e[i]){var l=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}a=e[i](t,i,r,n,null,Ro)}catch(e){a=e}if(!a||a instanceof Error||bo((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in wo)){wo[a.message]=!0;var c=o?o():"";bo("Failed "+n+" type: "+a.message+(null!=c?c:""))}}}Eo.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(wo={})};var So=Eo;const Fo=ReactIs;var Co=function(){};function Oo(){return null}"production"!==process.env.NODE_ENV&&(Co=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function ko(){}function Po(){}Po.resetWarningCache=ko;var To=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator;var r="<<anonymous>>",o={array:c("array"),bigint:c("bigint"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:l(Oo),arrayOf:function(e){return l((function(t,n,r,o,i){if("function"!=typeof e)return new a("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var l=t[n];if(!Array.isArray(l))return new a("Invalid "+o+" `"+i+"` of type `"+d(l)+"` supplied to `"+r+"`, expected an array.");for(var c=0;c<l.length;c++){var s=e(l,c,r,o,i+"["+c+"]",yo);if(s instanceof Error)return s}return null}))},element:l((function(t,n,r,o,i){var l=t[n];return e(l)?null:new a("Invalid "+o+" `"+i+"` of type `"+d(l)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:l((function(e,t,n,r,o){var i=e[t];return Fo.isValidElementType(i)?null:new a("Invalid "+r+" `"+o+"` of type `"+d(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,n,o,i,l){if(!(t[n]instanceof e)){var c=e.name||r;return new a("Invalid "+i+" `"+l+"` of type `"+(((s=t[n]).constructor&&s.constructor.name?s.constructor.name:r)+"` supplied to `")+o+"`, expected instance of `"+c+"`.")}var s;return null}))},node:l((function(e,t,n,r,o){return u(e[t])?null:new a("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,n,r,o,i){if("function"!=typeof e)return new a("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var s in l)if(go(l,s)){var u=e(l,s,r,o,i+"."+s,yo);if(u instanceof Error)return u}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Co(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),Oo;function t(t,n,r,o,l){for(var c=t[n],s=0;s<e.length;s++)if(i(c,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===f(t)?String(t):t}));return new a("Invalid "+o+" `"+l+"` of value `"+String(c)+"` supplied to `"+r+"`, expected one of "+u+".")}return l(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Co("Invalid argument supplied to oneOfType, expected an instance of array."),Oo;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Co("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+v(n)+" at index "+t+"."),Oo}return l((function(t,n,r,o,i){for(var l=[],c=0;c<e.length;c++){var s=(0,e[c])(t,n,r,o,i,yo);if(null==s)return null;s.data&&go(s.data,"expectedType")&&l.push(s.data.expectedType)}return new a("Invalid "+o+" `"+i+"` supplied to `"+r+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")}))},shape:function(e){return l((function(t,n,r,o,i){var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var v=e[u];if("function"!=typeof v)return s(r,o,i,u,f(v));var m=v(l,u,r,o,i+"."+u,yo);if(m)return m}return null}))},exact:function(e){return l((function(t,n,r,o,i){var l=t[n],c=d(l);if("object"!==c)return new a("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var u=ho({},t[n],e);for(var v in u){var m=e[v];if(go(e,v)&&"function"!=typeof m)return s(r,o,i,v,f(m));if(!m)return new a("Invalid "+o+" `"+i+"` key `"+v+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=m(l,v,r,o,i+"."+v,yo);if(p)return p}return null}))}};function i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function a(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function l(e){if("production"!==process.env.NODE_ENV)var n={},o=0;function i(i,l,c,s,u,d,f){if(s=s||r,d=d||c,f!==yo){if(t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var m=s+":"+c;!n[m]&&o<3&&(Co("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[m]=!0,o++)}}return null==l[c]?i?null===l[c]?new a("The "+u+" `"+d+"` is marked as required in `"+s+"`, but its value is `null`."):new a("The "+u+" `"+d+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(l,c,s,u,d)}var l=i.bind(null,!1);return l.isRequired=i.bind(null,!0),l}function c(e){return l((function(t,n,r,o,i,l){var c=t[n];return d(c)!==e?new a("Invalid "+o+" `"+i+"` of type `"+f(c)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function s(e,t,n,r,o){return new a((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function u(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(u);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!u(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!u(a[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function f(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return a.prototype=Error.prototype,o.checkPropTypes=So,o.resetWarningCache=So.resetWarningCache,o.PropTypes=o,o},No=function(){function e(e,t,n,r,o,i){if(i!==yo){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Po,resetWarningCache:ko};return n.PropTypes=n,n},Ao=c((function(e){if("production"!==process.env.NODE_ENV){var t=Fo;e.exports=To(t.isElement,!0)}else e.exports=No()})),Mo=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),Do="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,_o="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Io="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(_o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Bo=["top","right","bottom","left","width","height","size","weight"],zo="undefined"!=typeof MutationObserver,jo=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&l()}function a(){Io(i)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Do&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),zo?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Do&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Bo.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Lo=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},Wo=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||_o},Vo=qo(0,0,0,0);function Xo(e){return parseFloat(e)||0}function Yo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Xo(e["border-"+n+"-width"])}),0)}function Ho(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Vo;var r=Wo(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=Xo(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,l=Xo(r.width),c=Xo(r.height);if("border-box"===r.boxSizing&&(Math.round(l+i)!==t&&(l-=Yo(r,"left","right")+i),Math.round(c+a)!==n&&(c-=Yo(r,"top","bottom")+a)),!function(e){return e===Wo(e).document.documentElement}(e)){var s=Math.round(l+i)-t,u=Math.round(c+a)-n;1!==Math.abs(s)&&(l-=s),1!==Math.abs(u)&&(c-=u)}return qo(o.left,o.top,l,c)}var Uo="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Wo(e).SVGGraphicsElement}:function(e){return e instanceof Wo(e).SVGElement&&"function"==typeof e.getBBox};function Ko(e){return Do?Uo(e)?function(e){var t=e.getBBox();return qo(0,0,t.width,t.height)}(e):Ho(e):Vo}function qo(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Go=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qo(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Ko(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Jo=function(e,t){var n,r,o,i,a,l,c,s=(r=(n=t).x,o=n.y,i=n.width,a=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(l.prototype),Lo(c,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),c);Lo(this,{target:e,contentRect:s})},Qo=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Mo,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Wo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Go(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Wo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Jo(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),$o="undefined"!=typeof WeakMap?new WeakMap:new Mo,Zo=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=jo.getInstance(),r=new Qo(t,n,this);$o.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Zo.prototype[e]=function(){var t;return(t=$o.get(this))[e].apply(t,arguments)}}));var ei=void 0!==_o.ResizeObserver?_o.ResizeObserver:Zo,ti=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?ti="sticky":CSS.supports("position","-webkit-sticky")&&(ti="-webkit-sticky"));var ni=!1;try{var ri=Object.defineProperty({},"passive",{get:function(){ni={passive:!0}}});window.addEventListener("testPassive",null,ri),window.removeEventListener("testPassive",null,ri)}catch(e){}var oi=function(e){function t(t){var n=e.call(this,t)||this;return n.addListener=function(e,t,r,o){e.addEventListener(t,r,o),n.unsubscribes.push((function(){return e.removeEventListener(t,r)}))},n.addResizeObserver=function(e,t){var r=new ei(t);r.observe(e),n.unsubscribes.push((function(){return r.disconnect()}))},n.registerContainerRef=function(e){ti&&(n.node=e,e?(n.scrollPane=function(e){for(var t=e;t=t.parentElement;){var n=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)return window;if("auto"===n||"scroll"===n)return t}return window}(n.node),n.latestScrollY=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop,n.addListener(n.scrollPane,"scroll",n.handleScroll,ni),n.addListener(n.scrollPane,"mousewheel",n.handleScroll,ni),n.scrollPane===window?(n.addListener(window,"resize",n.handleWindowResize),n.handleWindowResize()):(n.addResizeObserver(n.scrollPane,n.handleScrollPaneResize),n.handleScrollPaneResize()),n.addResizeObserver(n.node.parentNode,n.handleParentNodeResize),n.handleParentNodeResize(),n.addResizeObserver(n.node,n.handleNodeResize),n.handleNodeResize({initial:!0}),n.initial()):(n.unsubscribes.forEach((function(e){return e()})),n.unsubscribes=[],n.scrollPane=null))},n.getCurrentOffset=function(){if("relative"===n.mode)return n.offset;var e=n.props,t=e.offsetTop,r=e.offsetBottom;return"stickyTop"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY-n.naturalTop+t):"stickyBottom"===n.mode?Math.max(0,n.scrollPaneOffset+n.latestScrollY+n.viewPortHeight-(n.naturalTop+n.nodeHeight+r)):void 0},n.handleWindowResize=function(){n.viewPortHeight=window.innerHeight,n.scrollPaneOffset=0,n.handleScroll()},n.handleScrollPaneResize=function(){n.viewPortHeight=n.scrollPane.offsetHeight,"production"!==process.env.NODE_ENV&&0===n.viewPortHeight&&console.warn("react-sticky-box's scroll pane has a height of 0. This seems odd. Please check this node:",n.scrollPane),n.scrollPane.firstChild.offsetParent===n.scrollPane?n.scrollPaneOffset=n.scrollPane.getBoundingClientRect().top:n.scrollPaneOffset=0,n.handleScroll()},n.handleParentNodeResize=function(){var e=n.node.parentNode,t=getComputedStyle(e,null),r=parseInt(t.getPropertyValue("padding-top"),10),o=parseInt(t.getPropertyValue("padding-bottom"),10);n.naturalTop=function(e,t){var n=e,r=0;t.firstChild&&t.firstChild.offsetParent!==t&&(r+=e.offsetTop-t.offsetTop,t=e.offsetParent,r+=-e.offsetTop);do{r+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return r}(e,n.scrollPane)+r+n.scrollPaneOffset;var i=n.parentHeight;n.parentHeight=e.getBoundingClientRect().height-(r+o),"relative"===n.mode&&(n.props.bottom?n.changeMode("relative"):i>n.parentHeight&&n.changeToStickyBottomIfBoxTooLow(n.latestScrollY)),i!==n.parentHeight&&"relative"===n.mode&&(n.latestScrollY=Number.POSITIVE_INFINITY,n.handleScroll())},n.handleNodeResize=function(e){var t=(void 0===e?{}:e).initial,r=n.nodeHeight;if(n.nodeHeight=n.node.getBoundingClientRect().height,!t&&r!==n.nodeHeight){var o=n.props,i=o.offsetTop,a=o.offsetBottom,l=o.bottom;if(n.nodeHeight+i+a<=n.viewPortHeight)n.mode=void 0,n.initial();else{var c=r-n.nodeHeight,s=n.parentHeight-n.nodeHeight,u=Math.min(s,n.getCurrentOffset()+(l?c:0));n.offset=Math.max(0,u),l&&"stickyBottom"===n.mode||n.changeMode("relative")}}},n.handleScroll=function(){var e=n.props,t=e.offsetTop,r=e.offsetBottom,o=n.scrollPane===window?window.scrollY:n.scrollPane.scrollTop;if(o!==n.latestScrollY){if(n.nodeHeight+t+r<=n.viewPortHeight)return n.initial(),void(n.latestScrollY=o);var i=o-n.latestScrollY;n.offset=n.getCurrentOffset(),i>0?"stickyTop"===n.mode?o+n.scrollPaneOffset+t>n.naturalTop&&(o+n.scrollPaneOffset+n.viewPortHeight<=n.naturalTop+n.nodeHeight+n.offset+r?n.changeMode("relative"):n.changeMode("stickyBottom")):"relative"===n.mode&&n.changeToStickyBottomIfBoxTooLow(o):"stickyBottom"===n.mode?n.scrollPaneOffset+o+n.viewPortHeight<n.naturalTop+n.parentHeight+r&&(n.scrollPaneOffset+o+t>=n.naturalTop+n.offset?n.changeMode("relative"):n.changeMode("stickyTop")):"relative"===n.mode&&n.scrollPaneOffset+o+t<n.naturalTop+n.offset&&n.changeMode("stickyTop"),n.latestScrollY=o}},t.offset&&"production"!==process.env.NODE_ENV&&console.warn('react-sticky-box\'s "offset" prop is deprecated. Please use "offsetTop" instead. It\'ll be removed in v0.8.'),n.unsubscribes=[],n}uo(t,e);var n=t.prototype;return n.changeMode=function(e){var t=this.props,n=t.onChangeMode,r=t.offsetTop,o=t.offsetBottom,i=t.bottom;if(this.mode!==e&&n(this.mode,e),this.mode=e,"relative"===e)if(this.node.style.position="relative",i){var a=Math.max(0,this.parentHeight-this.nodeHeight-this.offset);this.node.style.bottom=a+"px"}else this.node.style.top=this.offset+"px";else this.node.style.position=ti,"stickyBottom"===e?i?this.node.style.bottom=o+"px":this.node.style.top=this.viewPortHeight-this.nodeHeight-o+"px":i?this.node.style.bottom=this.viewPortHeight-this.nodeHeight-o+"px":this.node.style.top=r+"px";this.offset=this.getCurrentOffset()},n.initial=function(){this.props.bottom?"stickyBottom"!==this.mode&&this.changeMode("stickyBottom"):"stickyTop"!==this.mode&&this.changeMode("stickyTop")},n.changeToStickyBottomIfBoxTooLow=function(e){var t=this.props.offsetBottom;e+this.scrollPaneOffset+this.viewPortHeight>=this.naturalTop+this.nodeHeight+this.offset+t&&this.changeMode("stickyBottom")},n.render=function(){var e=this.props,t=e.children,n=e.className,r=e.style;return React.createElement("div",{className:n,style:r,ref:this.registerContainerRef},t)},t}(React.Component);function ii(e){var t=function(){var e=document.createElement("div");document.head.appendChild(e);var t=window.getComputedStyle(e).backgroundColor;return document.head.removeChild(e),t}(),n=window.getComputedStyle(e).backgroundColor;return n!=t?n:e.parentElement?ii(e.parentElement):t}oi.defaultProps={onChangeMode:function(){},offsetTop:0,offsetBottom:0},"production"!==process.env.NODE_ENV&&(oi.propTypes={onChangeMode:Ao.func,offsetTop:Ao.number,offsetBottom:Ao.number,bottom:Ao.bool});var ai=function(e){var r=e.align,o=void 0===r?"left":r,i=e.gutter,a=n(e,["align","gutter"]),l=v("formily-button-group");return React.createElement(antd.Space,t({},a,{size:i,className:s(l,a.className),style:t(t({},a.style),{justifyContent:"left"===o?"flex-start":"right"===o?"flex-end":"center",display:"flex"})}),a.children)};ai.FormItem=function(e){var r,o=e.gutter,i=n(e,["gutter"]);return React.createElement(Gn,t({},i,{label:" ",style:t(t({margin:0,padding:0},i.style),{width:"100%"}),colon:!1}),(null===(r=i.children)||void 0===r?void 0:r.length)?React.createElement(antd.Space,{size:o},i.children):i.children)},ai.Sticky=function(e){var r=e.align,o=void 0===r?"left":r,a=n(e,["align"]),l=React.useRef(),c=i(React.useState("transparent"),2),u=c[0],d=c[1],f=v("formily-button-group");return React.useLayoutEffect((function(){if(l.current){var e=ii(l.current);e!==u&&d(e)}})),React.createElement(oi,t({},a,{className:s("".concat(f,"-sticky"),a.className),style:t({backgroundColor:u},a.style),bottom:!0}),React.createElement("div",{ref:l,className:"".concat(f,"-sticky-inner"),style:t(t({},a.style),{justifyContent:"left"===o?"flex-start":"right"===o?"flex-end":"center"})},a.children))};var li=Formily.React.connect(antd.Input,Formily.React.mapProps((function(e,n){return t(t({},e),{suffix:React.createElement("span",null,(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffix)})})),Formily.React.mapReadPretty(Kn.Input));li.TextArea=Formily.React.connect(antd.Input.TextArea,Formily.React.mapReadPretty(Kn.Input));var ci=function(e){return e>=48&&e<=57},si=function(e){return e>=97&&e<=122},ui=function(e){return e>=65&&e<=90},di=function(e){return!(si(e)||ui(e)||ci(e))},fi=function(e){return si(e)||ui(e)},vi=function(e){return Formily.Shared.isFn(e.children)?e.children(function(e){if(!e)return 0;for(var t=0,n=0,r=0,o=0,i=0,a=0,l=0,c=0,s=0,u=function(){return t+n+r+o},d=0;d<e.length;d++){var f=e.charCodeAt(d);ci(f)?(t++,0!==d&&d!==e.length-1&&i++,d>0&&ci(e.charCodeAt(d-1))&&c++):si(f)?(n++,d>0&&si(e.charCodeAt(d-1))&&c++):ui(f)?(r++,d>0&&ui(e.charCodeAt(d-1))&&c++):(o++,0!==d&&d!==e.length-1&&i++);for(var v=!1,m=0;m<e.length;m++)e[d]===e[m]&&d!==m&&(v=!0,l+=Math.abs(e.length/(m-d)));if(v){a++;var p=e.length-a;l=p?Math.ceil(l/p):Math.ceil(l)}if(d>1){var h=e.charCodeAt(d-1),y=e.charCodeAt(d-2);if(fi(f)){if(fi(h)&&fi(y)){var g=e.toLowerCase(),b=g.charCodeAt(d),R=g.charCodeAt(d-1);b-R==R-g.charCodeAt(d-2)&&1===Math.abs(b-R)&&s++}}else ci(f)?ci(h)&&ci(y)&&f-h==h-y&&1===Math.abs(f-h)&&s++:di(h)&&di(y)&&f-h==h-y&&1===Math.abs(f-h)&&s++}}var w,x=0,E=u();return x+=4*E,n>0&&(x+=2*(E-n)),r>0&&(x+=2*(E-r)),t!==E&&(x+=4*t),x+=6*o,x+=2*i,x+=2*(w=t>0?1:0,w+=n>0?1:0,w+=r>0?1:0,(w+=o>0?1:0)>2&&u()>=8?w+1:0),E===n+r&&(x-=E),E===t&&(x-=t),x-=l,x-=2*c,(x=(x=(x-=3*s)<0?0:x)>100?100:x)>=80?100:x>=60?80:x>=40?60:x>=20?40:20}(String(e.value))):React.createElement(React.Fragment,null,e.children)},mi=Formily.React.connect((function(e){var r=e.value,o=e.className,i=e.checkStrength,a=n(e,["value","className","checkStrength"]),l={position:"absolute",zIndex:1,height:8,top:0,background:"#fff",width:1,transform:"translate(-50%, 0)"};return React.createElement("span",{className:o},React.createElement(antd.Input.Password,t({},a,{value:r})),i&&React.createElement(vi,{value:String(r)},(function(e){return React.createElement("div",{style:{background:"#e0e0e0",marginBottom:3,position:"relative"}},React.createElement("div",{style:t(t({},l),{left:"20%"})}),React.createElement("div",{style:t(t({},l),{left:"40%"})}),React.createElement("div",{style:t(t({},l),{left:"60%"})}),React.createElement("div",{style:t(t({},l),{left:"80%"})}),React.createElement("div",{style:{position:"relative",backgroundImage:"-webkit-linear-gradient(left, #ff5500, #ff9300)",transition:"all 0.35s ease-in-out",height:8,width:"100%",marginTop:5,clipPath:"polygon(0 0,".concat(e,"% 0,").concat(e,"% 100%,0 100%)")}}))})))}),Formily.React.mapReadPretty(Kn.Input)),pi=Formily.React.connect(antd.Cascader,Formily.React.mapProps({dataSource:"options"},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(Kn.Cascader)),hi=Formily.React.connect(antd.Radio,Formily.React.mapProps({value:"checked"}));hi.__ANT_RADIO=!0,hi.Group=Formily.React.connect(antd.Radio.Group,Formily.React.mapProps({dataSource:"options"}),Formily.React.mapReadPretty(Kn.Select));var yi=Formily.React.connect(antd.Checkbox,Formily.React.mapProps({value:"checked"}));yi.__ANT_CHECKBOX=!0,yi.Group=Formily.React.connect(antd.Checkbox.Group,Formily.React.mapProps({dataSource:"options"}),Formily.React.mapReadPretty(Kn.Select,{mode:"tags"}));var gi=Formily.React.connect(antd.Select,Formily.React.mapProps({dataSource:"options",loading:!0},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(Kn.Select)),bi=Formily.React.connect(antd.TreeSelect,Formily.React.mapProps({dataSource:"treeData"},(function(e,n){return t(t({},e),{suffixIcon:(null==n?void 0:n.loading)||(null==n?void 0:n.validating)?React.createElement(icons.LoadingOutlined,null):e.suffixIcon})})),Formily.React.mapReadPretty(Kn.TreeSelect)),Ri=function(e){return e.title},wi=Formily.React.connect(antd.Transfer,Formily.React.mapProps({value:"targetKeys"},(function(e,n){var r;return Formily.Core.isVoidField(n)?e:t(t({},e),{render:e.render||Ri,dataSource:(null===(r=n.dataSource)||void 0===r?void 0:r.map((function(e){return t(t({},e),{title:e.title||e.label,key:e.key||e.value})})))||[]})}))),xi=function(){return function(e){var n=e.format||function(e){return"month"===e.picker?"YYYY-MM":"quarter"===e.picker?"YYYY-\\QQ":"year"===e.picker?"YYYY":"week"===e.picker?"gggg-wo":e.showTime?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}(e),r=e.onChange;return t(t({},e),{format:n,value:u(e.value,"gggg-wo"===n?"gggg-ww":n),onChange:function(e){r&&r(d(e,n))}})}},Ei=Formily.React.connect(antd.DatePicker,Formily.React.mapProps(xi()),Formily.React.mapReadPretty(Kn.DatePicker));Ei.RangePicker=Formily.React.connect(antd.DatePicker.RangePicker,Formily.React.mapProps(xi()),Formily.React.mapReadPretty(Kn.DateRangePicker));var Si=function(){return function(e){var n=e.format||"HH:mm:ss",r=e.onChange;return t(t({},e),{format:n,value:u(e.value,n),onChange:function(e){r&&r(d(e,n))}})}},Fi=Formily.React.connect(antd.TimePicker,Formily.React.mapProps(Si()),Formily.React.mapReadPretty(Kn.TimePicker));Fi.RangePicker=Formily.React.connect(antd.TimePicker.RangePicker,Formily.React.mapProps(Si()),Formily.React.mapReadPretty(Kn.TimeRangePicker));var Ci=Formily.React.connect(antd.InputNumber,Formily.React.mapReadPretty(Kn.NumberPicker)),Oi=Formily.React.connect(antd.Switch,Formily.React.mapProps({value:"checked"},(function(e){var n=e.onChange;return delete e.value,t(t({},e),{onChange:function(e){null==n||n(e,null)}})}))),ki=[{ext:/\.docx/i,icon:"//img.alicdn.com/tfs/TB1n8jfr1uSBuNjy1XcXXcYjFXa-200-200.png"},{ext:/\.pptx/i,icon:"//img.alicdn.com/tfs/TB1ItgWr_tYBeNjy1XdXXXXyVXa-200-200.png"},{ext:/\.jpe?g/i,icon:"//img.alicdn.com/tfs/TB1wrT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.pdf/i,icon:"//img.alicdn.com/tfs/TB1GwD8r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.png/i,icon:"//img.alicdn.com/tfs/TB1BHT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.eps/i,icon:"//img.alicdn.com/tfs/TB1G_iGrVOWBuNjy0FiXXXFxVXa-200-200.png"},{ext:/\.ai/i,icon:"//img.alicdn.com/tfs/TB1B2cVr_tYBeNjy1XdXXXXyVXa-200-200.png"},{ext:/\.gif/i,icon:"//img.alicdn.com/tfs/TB1DTiGrVOWBuNjy0FiXXXFxVXa-200-200.png"},{ext:/\.svg/i,icon:"//img.alicdn.com/tfs/TB1uUm9rY9YBuNjy0FgXXcxcXXa-200-200.png"},{ext:/\.xlsx?/i,icon:"//img.alicdn.com/tfs/TB1any1r1OSBuNjy0FdXXbDnVXa-200-200.png"},{ext:/\.psd?/i,icon:"//img.alicdn.com/tfs/TB1_nu1r1OSBuNjy0FdXXbDnVXa-200-200.png"},{ext:/\.(wav|aif|aiff|au|mp1|mp2|mp3|ra|rm|ram|mid|rmi)/i,icon:"//img.alicdn.com/tfs/TB1jPvwr49YBuNjy0FfXXXIsVXa-200-200.png"},{ext:/\.(avi|wmv|mpg|mpeg|vob|dat|3gp|mp4|mkv|rm|rmvb|mov|flv)/i,icon:"//img.alicdn.com/tfs/TB1FrT5r9BYBeNjy0FeXXbnmFXa-200-200.png"},{ext:/\.(zip|rar|arj|z|gz|iso|jar|ace|tar|uue|dmg|pkg|lzh|cab)/i,icon:"//img.alicdn.com/tfs/TB10jmfr29TBuNjy0FcXXbeiFXa-200-200.png"},{ext:/\.[^.]+/i,icon:"//img.alicdn.com/tfs/TB10.R4r3mTBuNjy1XbXXaMrVXa-200-200.png"}],Pi=function(e,t){return t&&Formily.Shared.isArr(t.include)?t.include.some((function(t){return e.test(t)})):!t||!Formily.Shared.isArr(t.exclude)||!t.exclude.some((function(t){return e.test(t)}))},Ti=function(e,t){for(var n=0;n<ki.length;n++)if(ki[n].ext.test(e)&&Pi(ki[n].ext,t))return ki[n].icon||e;return e},Ni=function(e){return(null==e?void 0:e.url)||(null==e?void 0:e.downloadURL)||(null==e?void 0:e.imgURL)},Ai=function(e){return(null==e?void 0:e.thumbUrl)||(null==e?void 0:e.url)||(null==e?void 0:e.downloadURL)||(null==e?void 0:e.imgURL)},Mi=function(e){return(null==e?void 0:e.errorMessage)||(null==e?void 0:e.errMsg)||(null==e?void 0:e.errorMsg)||(null==e?void 0:e.message)||("string"==typeof(null==e?void 0:e.error)?e.error:"")},Di=function(e){return!1===(null==e?void 0:e.success)||!0===(null==e?void 0:e.failed)||(null==e?void 0:e.error)?"error":(null==e?void 0:e.state)||(null==e?void 0:e.status)},_i=function(e){return e&&e.length?e.map((function(e,n){return t(t({},e),{uid:e.uid||"".concat(n),status:Di(e.response)||Di(e),url:Ni(e)||Ni(null==e?void 0:e.response),thumbUrl:Ti(Ai(e)||Ai(null==e?void 0:e.response),{exclude:[".png",".jpg",".jpeg",".gif"]})})})):[]},Ii=function(e){var t,n;void 0===e&&(e="Upload Service Error"),t=function(t){for(var n,r,o=Formily.Shared.toArr(t),i=0;i<o.length;i++)if("error"===(null===(n=o[i])||void 0===n?void 0:n.status))return Mi(null===(r=o[i])||void 0===r?void 0:r.response)||Mi(o[i])||e},n=Formily.React.useField(),React.useEffect((function(){var e=Formily.Reactive.reaction((function(){return n.value}),(function(e){var r=t(e);n.setFeedback({type:"error",code:"UploadError",messages:r?[r]:[]})}));return function(){e()}}),[])};function Bi(e){var r=e.serviceErrorMessage,o=n(e,["serviceErrorMessage"]);Ii(r);return t(t({},o),{fileList:_i(o.fileList),onChange:function(e){var t;null===(t=o.onChange)||void 0===t||t.call(o,_i(a([],i(e.fileList),!1)))}})}var zi=Formily.React.connect((function(e){return React.createElement(antd.Upload,t({},Bi(e)),e.children||function(e){return"picture-card"!==e.listType?React.createElement(antd.Button,null,React.createElement(icons.UploadOutlined,null),e.textContent):React.createElement(icons.UploadOutlined,{style:{fontSize:20}})}(e))}),Formily.React.mapProps({value:"fileList"})),ji=Formily.React.connect((function(e){return React.createElement("div",{className:v("upload-dragger")},React.createElement(antd.Upload.Dragger,t({},Bi(e)),e.children||React.createElement(React.Fragment,null,React.createElement("p",{className:"ant-upload-drag-icon"},React.createElement(icons.InboxOutlined,null)),e.textContent&&React.createElement("p",{className:"ant-upload-text"},e.textContent))))}),Formily.React.mapProps({value:"fileList"}));zi.Dragger=ji;var Li=Formily.React.observer((function(e){var r=e.onSubmit,o=e.onSubmitFailed,i=e.onSubmitSuccess,a=n(e,["onSubmit","onSubmitFailed","onSubmitSuccess"]),l=Formily.React.useParentForm();return React.createElement(antd.Button,t({htmlType:r?"button":"submit",type:"primary"},a,{loading:void 0!==a.loading?a.loading:l.submitting,onClick:function(e){a.onClick&&!1===a.onClick(e)||r&&l.submit(r).then(i).catch(o)}}),a.children)}),{forwardRef:!0}),Wi=function(){var e,t,n=Formily.React.useField();return(null===(e=null==n?void 0:n.parent)||void 0===e?void 0:e.pattern)||(null===(t=null==n?void 0:n.form)||void 0===t?void 0:t.pattern)},Vi=Formily.React.observer((function(e){var n=i(function(){var e=Wi(),t=Formily.React.useField();return React.useLayoutEffect((function(){if("editable"===e)return t.setPattern("readPretty")}),[e]),["editable"===t.pattern,function(n){"editable"===e&&t.setPattern(n?"editable":"readPretty")}]}(),2),r=n[0],o=n[1],a=Wi(),l=function(){var e=Formily.React.useField();return Formily.Core.isVoidField(e)?{}:e?{feedbackStatus:"validating"===e.validateStatus?"pending":e.validateStatus,feedbackText:e.selfErrors.length?e.selfErrors:e.selfWarnings.length?e.selfWarnings:e.selfSuccesses.length?e.selfSuccesses:void 0,extra:e.description}:{}}(),c=Formily.React.useField(),s=v(),u=v("formily-editable"),d=React.useRef(),f=React.useRef(),m=function(){var e;d.current&&!(null===(e=null==c?void 0:c.errors)||void 0===e?void 0:e.length)&&o(!1)};!function(e,t,n){void 0===n&&(n="click");var r=React.useRef(e);r.current=e,React.useEffect((function(){var e=function(e){(Array.isArray(t)?t:[t]).some((function(t){var n=function(e,t){return e?"function"==typeof e?e():"current"in e?e.current:e:t}(t);return!n||(null==n?void 0:n.contains(e.target))}))||r.current(e)};return document.addEventListener(n,e),function(){document.removeEventListener(n,e)}}),[t,n])}((function(e){var t=e.target;(null==t?void 0:t.closest(".".concat(s,"-select-dropdown")))||(null==t?void 0:t.closest(".".concat(s,"-picker-dropdown")))||(null==t?void 0:t.closest(".".concat(s,"-cascader-menus")))||m()}),f);return d.current=r,React.createElement("div",{className:u,ref:f,onClick:function(e){var t=e.target,n=f.current.querySelector(".".concat(u,"-close-btn"));(null==t?void 0:t.contains(n))||(null==n?void 0:n.contains(t))?m():d.current||setTimeout((function(){o(!0),setTimeout((function(){var e;null===(e=f.current.querySelector("input"))||void 0===e||e.focus()}))}))}},React.createElement("div",{className:"".concat(u,"-content")},React.createElement(Gn,t({},e,l),e.children),function(){if(!r)return React.createElement(Gn,t({},e,l),"editable"===a&&React.createElement(icons.EditOutlined,{className:"".concat(u,"-edit-btn")}),"editable"!==a&&React.createElement(icons.MessageOutlined,{className:"".concat(u,"-edit-btn")}))}(),function(){if(r)return React.createElement(Gn,t({},e),React.createElement(icons.CloseOutlined,{className:"".concat(u,"-close-btn")}))}()))}));function Xi(e,t){return function(e){if(Formily.Shared.isArr(e))return e;return void 0!==e?[e]:[]}(e).join("").toUpperCase().includes(t)}Vi.Popover=Formily.React.observer((function(e){var n=Formily.React.useField(),a=Wi(),l=i(React.useState(!1),2),c=l[0],u=l[1],d=v("formily-editable");return React.createElement(antd.Popover,t({},e,{title:e.title||n.title,visible:c,className:s(d,e.className),content:e.children,trigger:"click",destroyTooltipOnHide:!0,onVisibleChange:function(e){e?u(!0):r(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),[4,n.form.validate("".concat(n.address,".*"))];case 1:return t.sent(),[3,3];case 2:return(null==(e=n.form.queryFeedbacks({type:"error",address:"".concat(n.address,".*")}))?void 0:e.length)?[2]:(u(!1),[7]);case 3:return[2]}}))}))}}),React.createElement("div",null,React.createElement(Gn,{className:"".concat(d,"-trigger")},React.createElement("div",{className:"".concat(d,"-content")},React.createElement("span",{className:"".concat(d,"-preview")},e.title||n.title),"editable"===a&&React.createElement(icons.EditOutlined,{className:"".concat(d,"-edit-btn")}),"editable"!==a&&React.createElement(icons.MessageOutlined,{className:"".concat(d,"-edit-btn")})))))}));var Yi=function(e,n,r,o){return React.useMemo((function(){if(!n||!1===r)return e;var i=Formily.Shared.isFn(r)?r:function(e,t){return function(e,t){var n=new Set,r=function(e){return Object.keys(e||{}).some((function(o){if("__level"===o)return!1;var i=e[o];return!React.isValidElement(i)&&"children"!==o&&!n.has(i)&&("object"==typeof i?(n.add(i),r(i)):Xi(i,t))}))};return r(e)}(t,e.toUpperCase())},a=function(e){var r=[];return null==e||e.forEach((function(e){var l;if(null===(l=null==e?void 0:e.children)||void 0===l?void 0:l.length){var c=a(e.children);c.length?r.push(t(t({},e),{children:c})):i(n,e)&&!1!==o&&r.push(t(t({},e),{children:[]}))}else i(n,e)&&r.push(e)})),r};return a(e)}),[e,n,r])},Hi=function(e){var t=function(e){var n=[];return null==e||e.forEach((function(e){var r;n=a(a([],i(n),!1),[e],!1),(null===(r=null==e?void 0:e.children)||void 0===r?void 0:r.length)&&(n=a(a([],i(n),!1),i(t(e.children)),!1))})),n};return t(e)},Ui=function(e,t){return Formily.Shared.isArr(e)?e.reduce((function(e,n){return(null==n?void 0:n.disabled)?e:a(a(a([],i(e),!1),[n[t]],!1),i(Ui(null==n?void 0:n.children,t)),!1)}),[]):[]},Ki=function(e,t,n){var r=a(a([],i(Ui(e,n)),!1),i(t),!1);return a([],i(new Set(r)),!1).length!==r.length},qi=function(e,t,n){void 0===e&&(e=[]);var r=a([],i(t),!1);return e.forEach((function(e){var t;(null===(t=e.children)||void 0===t?void 0:t.length)&&(r=qi(e.children,r,n),!function(e,t,n){var r=e.filter((function(e){return!(null==e?void 0:e.disabled)}));return r.filter((function(e){return null==t?void 0:t.includes(e[n])})).length===r.length}(e.children,r,n)?r=r.filter((function(t){return t!==e[n]})):(null==e?void 0:e.disabled)||(r=a([],i(new Set(a(a([],i(r),!1),[e[n]],!1))),!1)))})),r},Gi=function(e,n,r){void 0===e&&(e=[]);var o=[];return e.forEach((function(e){var i=Gi(e.children,n,r);(i.length||(null==n?void 0:n.includes(e[r])))&&o.push(t(t({},e),i.length?{children:i}:{}))})),o},Ji=function(e,n){return e.map((function(e){var r,o=t({},e);return delete o[n],(null===(r=o.children)||void 0===r?void 0:r.length)&&(o.children=Ji(o.children,n)),o}))},Qi=function(e,t,n,r,o){if(!n.length)return!1;var i=e.filter((function(e){return n.includes(e)}));return(!1!==r?i:qi(t,i,o)).length===n.length},$i=function(e,t,n,r,o,l,c,s){return function(){var u=Boolean((null==e?void 0:e.length)&&(null==e?void 0:e.length)===t.filter((function(e){return!e.disabled})).length),d=Boolean((null==e?void 0:e.length)&&!u);return React.createElement(antd.Checkbox,{key:"titleAddons",disabled:o,checked:u,indeterminate:d,onChange:function(o){if(!l){var u=o.target.checked,d=n.filter((function(e){return!e.disabled})).map((function(e){return null==e?void 0:e[r]}));Qi(e,n,d,c,r)&&(u=!1);var f=[];f=u?a([],i(new Set(a(a([],i(e),!1),i(d),!1))),!1):e.filter((function(e){return!d.includes(e)})),f=qi(t,f,r),null==s||s(f)}}})}},Zi=function(e,t,n,r){if(!(null==n?void 0:n.includes(e[r]))){var o=t.find((function(t){return t[r]===e[r]}));return Ki(o.children,n,r)||void 0}},ea=antd.Input.Search,ta=function(e){var t;return(null===(t=e["x-component"])||void 0===t?void 0:t.indexOf("Column"))>-1},na=function(e,n,r){return e.map((function(e){var o,i=Formily.Shared.isArr(e.children)?na(e.children,n,r):{};return t(t(t({},e),i),((o={})[r]=n(e),o))}))},ra=Formily.React.observer((function(e){var r,o,l,c,u,d=e.mode,f=void 0===d?"multiple":d,m=e.dataSource,p=e.optionAsValue,h=e.valueType,y=void 0===h?"all":h,g=e.showSearch,b=void 0!==g&&g,R=e.filterOption,w=e.filterSort,x=e.onSearch,E=e.searchProps,S=e.className,F=e.value,C=e.onChange,O=e.rowSelection,k=e.primaryKey,P=void 0===k?"key":k,T=n(e,["mode","dataSource","optionAsValue","valueType","showSearch","filterOption","filterSort","onSearch","searchProps","className","value","onChange","rowSelection","primaryKey"]),N=v("formily-select-table",e),A=i(React.useState(),2),M=A[0],D=A[1],_=Formily.React.useField(),I=Formily.Shared.isBool(e.loading)?e.loading:_.loading,B=_.disabled,z=_.readOnly,j=_.readPretty,L=function(e,t,n){void 0===e&&(e="default");var r={small:{searchSize:"small",tableSize:"small"},default:{searchSize:"middle",tableSize:"middle"},large:{searchSize:"large",tableSize:"default"}}[e],o=r.searchSize,i=r.tableSize;return{searchSize:t||o,tableSize:n||i}}(null===(r=_.decoratorProps)||void 0===r?void 0:r.size,null==E?void 0:E.size,null==e?void 0:e.size),W=L.searchSize,V=L.tableSize,X=Formily.Shared.isFn(P)?"__formily_key__":P,Y=(l=Formily.React.useField(),c=Formily.React.useFieldSchema(),u=function(e){var n,r,o;if(ta(e)){if(!(null===(n=e["x-component-props"])||void 0===n?void 0:n.dataIndex)&&!e.name)return[];var i=(null===(r=e["x-component-props"])||void 0===r?void 0:r.dataIndex)||e.name,a=l.query(l.address.concat(i)).take(),c=(null===(o=null==a?void 0:a.component)||void 0===o?void 0:o[1])||e["x-component-props"]||{};return[{name:i,display:(null==a?void 0:a.display)||e["x-display"],field:a,schema:e,columnProps:t({title:(null==a?void 0:a.title)||c.title},c)}]}if(e.properties)return e.reduceProperties((function(e,t){return e.concat(u(t))}),[])},function(e){return e?(Formily.Shared.isArr(e)?e:[e]).reduce((function(e,t){var n=u(t);return n?e.concat(n):e}),[]):[]}("array"===(null==c?void 0:c.type)&&(null==c?void 0:c.items)?c.items:c)),H=function(e){return e.reduce((function(e,n,r){var o=n.name,i=n.columnProps,a=n.schema;return"visible"!==n.display?e:ta(a)?e.concat(t(t({},i),{key:r,dataIndex:o})):e}),[])}(Y),U=Formily.Shared.isArr(m)?m:_.dataSource;U=Formily.Shared.isFn(P)?na(U,P,X):U;var K=Yi(U,M,R,null==O?void 0:O.checkStrictly),q=React.useMemo((function(){return w?a([],i(K),!1).sort((function(e,t){return w(e,t)})):K}),[K,w]),G=Hi(U),J=Hi(K),Q=function(e,t,n,r,o,l,c,s){var u=!1!==c?"all":r,d="path"!==u&&o,f="single"===l?[e]:Formily.Shared.isArr(e)?e:[];f=d&&"path"!==u?f.map((function(e){return Formily.Shared.isFn(s)?s(e):null==e?void 0:e[n]})):f;var v=[];if("parent"===u){var m=t.filter((function(e){return f.includes(e[n])})),p=[];m.forEach((function(e){p=a(a([],i(p),!1),i(Ui(e.children,n)),!1)})),v=a([],i(new Set(a(a([],i(f),!1),i(p),!1))),!1)}else if("child"===u)v=qi(t,f,n);else if("path"===u){var h=Hi(f).map((function(e){return e[n]}));v=qi(t,h,n)}else v=a([],i(f),!1);return v}(F,G,X,y,p,f,null==O?void 0:O.checkStrictly,P),$=Yi(q,Q,(function(e,t){return e.includes(t[X])})),Z=function(e){var t=(e||"").trim();D(e),null==x||x(t)},ee=function(e){if(!z){var t=function(){if(p&&"multiple"===f&&(null==F?void 0:F.length)){var e=new Map;return a(a([],i(G),!1),i(F),!1).forEach((function(t){e.has(t[X])||e.set(t[X],t)})),a([],i(e.values()),!1)}return G}().filter((function(t){return e.includes(null==t?void 0:t[X])})),n=function(e,t,n,r,o,l,c,s){var u=!1!==s?"all":o,d="path"!==u&&l,f=[],v=[];if("parent"===u){var m=[];t.forEach((function(e){m=a(a([],i(m),!1),i(Ui(e.children,r)),!1)})),f=e.filter((function(e){return!m.includes(e)})),v=t.filter((function(e){return f.includes(e[r])}))}else"child"===u?(f=a([],i(e),!1),(v=a([],i(t),!1)).forEach((function(t){Ki(t.children,e,r)&&(f=f.filter((function(e){return e!==t[r]})),v=v.filter((function(e){return e[r]!==t[r]})))}))):"path"===u?(f=Gi(n,e,r),v=a([],i(t),!1)):(f=a([],i(e),!1),v=a([],i(t),!1));return v=Ji(v,"__formily_key__"),f=d&&"path"!==u?v:f,"single"===c&&(f=f[0],v=v[0]),{outputValue:f,outputOptions:v}}(e,t,U,X,y,p,f,null==O?void 0:O.checkStrictly),r=n.outputValue,o=n.outputOptions;null==C||C(r,o)}},te=function(e){var t=function(e,t,n,r,o,l){var c=e.length>t.length,s=a(a([],i(e),!1),i(t),!1).find((function(n){return!(e.includes(n)&&t.includes(n))})),u=r.find((function(e){return e[o]===s})),d=Ui(u.children,o);Qi(t,u.children,d,l,o)&&(c=!1);var f=[];return f=c?a([],i(new Set(a(a(a([],i(t),!1),[s],!1),i(d),!1))),!1):t.filter((function(e){return!a([s],i(d),!1).includes(e)})),{selectedRowKeys:f=qi(n,f,o)}}(e,Q,G,J,X,null==O?void 0:O.checkStrictly).selectedRowKeys;ee(t)},ne=function(e,t,n,r,o,i,a,l,c){return"single"===o?{}:{columnTitle:$i(e,t,n,r,i,a,l,c)}}(Q,G,J,X,f,B,z,null==O?void 0:O.checkStrictly,ee),re=null===(o={multiple:"checkbox",single:"radio"})||void 0===o?void 0:o[f];return React.createElement("div",{className:N},b?React.createElement(ea,t({},E,{className:s("".concat(N,"-search"),null==E?void 0:E.className),style:t({width:"100%"},null==E?void 0:E.style),onSearch:Z,onChange:function(e){return Z(e.target.value)},disabled:B,readOnly:z,size:W,loading:I})):null,React.createElement(antd.Table,t({},T,{className:s("".concat(N,"-table"),S),dataSource:j?$:q,rowSelection:j?void 0:t(t(t(t(t({},O),ne),{getCheckboxProps:function(e){var n;return t(t({},null===(n=null==O?void 0:O.getCheckboxProps)||void 0===n?void 0:n.call(O,e)),{disabled:B||(null==e?void 0:e.disabled)})}}),!1!==(null==O?void 0:O.checkStrictly)?{}:{renderCell:function(e,t,n,r){return React.cloneElement(r,{indeterminate:Zi(t,G,Q,X)})}}),{selectedRowKeys:Q,onChange:!1!==(null==O?void 0:O.checkStrictly)?ee:te,type:re,preserveSelectedRowKeys:!0,checkStrictly:!0}),columns:e.columns||H,rowKey:X,loading:I,size:V,onRow:function(e){var n,r=null===(n=T.onRow)||void 0===n?void 0:n.call(T,e);return t(t({},r),{onClick:function(t){var n;null===(n=null==r?void 0:r.onClick)||void 0===n||n.call(r,t),function(e){if(!(j||B||z||(null==e?void 0:e.disabled))){var t=null==e?void 0:e[X],n=null==Q?void 0:Q.includes(t),r=[];r="single"===f?[t]:n?Q.filter((function(e){return e!==t})):a(a([],i(Q),!1),[t],!1),!1!==(null==O?void 0:O.checkStrictly)?ee(r):te(r)}}(e)}})}}),""),Y.map((function(e,t){if(ta(e.schema))return React.createElement(Formily.React.RecursionField,{name:e.name,schema:e.schema,onlyRenderSelf:!0,key:t})})))}));ra.Column=function(){return React.createElement(React.Fragment,null)},e.ArrayBase=$t,e.ArrayCards=yn,e.ArrayCollapse=En,e.ArrayItems=On,e.ArrayTable=dn,e.ArrayTabs=vn,e.BaseItem=Gn,e.Cascader=pi,e.Checkbox=yi,e.DatePicker=Ei,e.Editable=Vi,e.Form=function(e){var r=e.form,o=e.component,i=void 0===o?"form":o,a=e.onAutoSubmit,l=e.onAutoSubmitFailed,c=e.previewTextPlaceholder,s=n(e,["form","component","onAutoSubmit","onAutoSubmitFailed","previewTextPlaceholder"]),u=Formily.React.useParentForm(),d=function(e){return React.createElement(Kn.Placeholder,{value:c},React.createElement(jn,t({},s),React.createElement(i,{onSubmit:function(t){var n,r;null===(n=null==t?void 0:t.stopPropagation)||void 0===n||n.call(t),null===(r=null==t?void 0:t.preventDefault)||void 0===r||r.call(t),e.submit(a).catch(l)}},s.children)))};if(r)return React.createElement(Formily.React.FormProvider,{form:r},d(r));if(!u)throw new Error("must pass form instance by createForm");return d(u)},e.FormButtonGroup=ai,e.FormCollapse=co,e.FormDialog=Pn,e.FormDrawer=Nn,e.FormGrid=no,e.FormItem=Jn,e.FormLayout=jn,e.FormLayoutDeepContext=Dn,e.FormLayoutShallowContext=_n,e.FormStep=Qn,e.FormTab=ao,e.GridColumn=ro,e.Input=li,e.NumberPicker=Ci,e.Password=mi,e.PreviewText=Kn,e.Radio=hi,e.Reset=function(e){var r=e.forceClear,o=e.validate,i=e.onResetValidateSuccess,a=e.onResetValidateFailed,l=n(e,["forceClear","validate","onResetValidateSuccess","onResetValidateFailed"]),c=Formily.React.useParentForm();return React.createElement(antd.Button,t({},l,{onClick:function(e){l.onClick&&!1===l.onClick(e)||c.reset("*",{forceClear:r,validate:o}).then(i).catch(a)}}),l.children)},e.Select=gi,e.SelectTable=ra,e.Space=function(e){var n,r=zn();return React.createElement(antd.Space,t({size:null!==(n=e.size)&&void 0!==n?n:null==r?void 0:r.spaceGap},e))},e.Submit=Li,e.Switch=Oi,e.TimePicker=Fi,e.Transfer=wi,e.TreeSelect=bi,e.Upload=zi,e.createFormGrid=$r,e.useFormDeepLayout=In,e.useFormGrid=Zr,e.useFormLayout=zn,e.useFormShallowLayout=Bn,e.useGridColumn=to,e.useGridSpan=eo,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=formily.antd.umd.production.js.map
